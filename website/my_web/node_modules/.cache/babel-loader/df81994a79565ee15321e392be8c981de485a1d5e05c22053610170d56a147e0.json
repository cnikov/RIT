{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, addDisposableListener, append, scheduleAtNextAnimationFrame } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { Sash } from '../sash/sash.js';\nimport { SmoothScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { pushToEnd, pushToStart, range } from '../../../common/arrays.js';\nimport { Color } from '../../../common/color.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { combinedDisposable, Disposable, dispose, toDisposable } from '../../../common/lifecycle.js';\nimport { clamp } from '../../../common/numbers.js';\nimport { Scrollable } from '../../../common/scrollable.js';\nimport * as types from '../../../common/types.js';\nimport './splitview.css';\nconst defaultStyles = {\n  separatorBorder: Color.transparent\n};\nclass ViewItem {\n  set size(size) {\n    this._size = size;\n  }\n  get size() {\n    return this._size;\n  }\n  get visible() {\n    return typeof this._cachedVisibleSize === 'undefined';\n  }\n  setVisible(visible, size) {\n    var _a, _b;\n    if (visible === this.visible) {\n      return;\n    }\n    if (visible) {\n      this.size = clamp(this._cachedVisibleSize, this.viewMinimumSize, this.viewMaximumSize);\n      this._cachedVisibleSize = undefined;\n    } else {\n      this._cachedVisibleSize = typeof size === 'number' ? size : this.size;\n      this.size = 0;\n    }\n    this.container.classList.toggle('visible', visible);\n    (_b = (_a = this.view).setVisible) === null || _b === void 0 ? void 0 : _b.call(_a, visible);\n  }\n  get minimumSize() {\n    return this.visible ? this.view.minimumSize : 0;\n  }\n  get viewMinimumSize() {\n    return this.view.minimumSize;\n  }\n  get maximumSize() {\n    return this.visible ? this.view.maximumSize : 0;\n  }\n  get viewMaximumSize() {\n    return this.view.maximumSize;\n  }\n  get priority() {\n    return this.view.priority;\n  }\n  get proportionalLayout() {\n    var _a;\n    return (_a = this.view.proportionalLayout) !== null && _a !== void 0 ? _a : true;\n  }\n  get snap() {\n    return !!this.view.snap;\n  }\n  set enabled(enabled) {\n    this.container.style.pointerEvents = enabled ? '' : 'none';\n  }\n  constructor(container, view, size, disposable) {\n    this.container = container;\n    this.view = view;\n    this.disposable = disposable;\n    this._cachedVisibleSize = undefined;\n    if (typeof size === 'number') {\n      this._size = size;\n      this._cachedVisibleSize = undefined;\n      container.classList.add('visible');\n    } else {\n      this._size = 0;\n      this._cachedVisibleSize = size.cachedVisibleSize;\n    }\n  }\n  layout(offset, layoutContext) {\n    this.layoutContainer(offset);\n    this.view.layout(this.size, offset, layoutContext);\n  }\n  dispose() {\n    this.disposable.dispose();\n  }\n}\nclass VerticalViewItem extends ViewItem {\n  layoutContainer(offset) {\n    this.container.style.top = `${offset}px`;\n    this.container.style.height = `${this.size}px`;\n  }\n}\nclass HorizontalViewItem extends ViewItem {\n  layoutContainer(offset) {\n    this.container.style.left = `${offset}px`;\n    this.container.style.width = `${this.size}px`;\n  }\n}\nvar State;\n(function (State) {\n  State[State[\"Idle\"] = 0] = \"Idle\";\n  State[State[\"Busy\"] = 1] = \"Busy\";\n})(State || (State = {}));\nexport var Sizing;\n(function (Sizing) {\n  /**\n   * When adding or removing views, distribute the delta space among\n   * all other views.\n   */\n  Sizing.Distribute = {\n    type: 'distribute'\n  };\n  /**\n   * When adding or removing views, split the delta space with another\n   * specific view, indexed by the provided `index`.\n   */\n  function Split(index) {\n    return {\n      type: 'split',\n      index\n    };\n  }\n  Sizing.Split = Split;\n  /**\n   * When adding a view, use DistributeSizing when all pre-existing views are\n   * distributed evenly, otherwise use SplitSizing.\n   */\n  function Auto(index) {\n    return {\n      type: 'auto',\n      index\n    };\n  }\n  Sizing.Auto = Auto;\n  /**\n   * When adding or removing views, assume the view is invisible.\n   */\n  function Invisible(cachedVisibleSize) {\n    return {\n      type: 'invisible',\n      cachedVisibleSize\n    };\n  }\n  Sizing.Invisible = Invisible;\n})(Sizing || (Sizing = {}));\n/**\n * The {@link SplitView} is the UI component which implements a one dimensional\n * flex-like layout algorithm for a collection of {@link IView} instances, which\n * are essentially HTMLElement instances with the following size constraints:\n *\n * - {@link IView.minimumSize}\n * - {@link IView.maximumSize}\n * - {@link IView.priority}\n * - {@link IView.snap}\n *\n * In case the SplitView doesn't have enough size to fit all views, it will overflow\n * its content with a scrollbar.\n *\n * In between each pair of views there will be a {@link Sash} allowing the user\n * to resize the views, making sure the constraints are respected.\n *\n * An optional {@link TLayoutContext layout context type} may be used in order to\n * pass along layout contextual data from the {@link SplitView.layout} method down\n * to each view's {@link IView.layout} calls.\n *\n * Features:\n * - Flex-like layout algorithm\n * - Snap support\n * - Orthogonal sash support, for corner sashes\n * - View hide/show support\n * - View swap/move support\n * - Alt key modifier behavior, macOS style\n */\nexport class SplitView extends Disposable {\n  get orthogonalStartSash() {\n    return this._orthogonalStartSash;\n  }\n  get orthogonalEndSash() {\n    return this._orthogonalEndSash;\n  }\n  get startSnappingEnabled() {\n    return this._startSnappingEnabled;\n  }\n  get endSnappingEnabled() {\n    return this._endSnappingEnabled;\n  }\n  /**\n   * A reference to a sash, perpendicular to all sashes in this {@link SplitView},\n   * located at the left- or top-most side of the SplitView.\n   * Corner sashes will be created automatically at the intersections.\n   */\n  set orthogonalStartSash(sash) {\n    for (const sashItem of this.sashItems) {\n      sashItem.sash.orthogonalStartSash = sash;\n    }\n    this._orthogonalStartSash = sash;\n  }\n  /**\n   * A reference to a sash, perpendicular to all sashes in this {@link SplitView},\n   * located at the right- or bottom-most side of the SplitView.\n   * Corner sashes will be created automatically at the intersections.\n   */\n  set orthogonalEndSash(sash) {\n    for (const sashItem of this.sashItems) {\n      sashItem.sash.orthogonalEndSash = sash;\n    }\n    this._orthogonalEndSash = sash;\n  }\n  /**\n   * Enable/disable snapping at the beginning of this {@link SplitView}.\n   */\n  set startSnappingEnabled(startSnappingEnabled) {\n    if (this._startSnappingEnabled === startSnappingEnabled) {\n      return;\n    }\n    this._startSnappingEnabled = startSnappingEnabled;\n    this.updateSashEnablement();\n  }\n  /**\n   * Enable/disable snapping at the end of this {@link SplitView}.\n   */\n  set endSnappingEnabled(endSnappingEnabled) {\n    if (this._endSnappingEnabled === endSnappingEnabled) {\n      return;\n    }\n    this._endSnappingEnabled = endSnappingEnabled;\n    this.updateSashEnablement();\n  }\n  /**\n   * Create a new {@link SplitView} instance.\n   */\n  constructor(container, options = {}) {\n    var _a, _b, _c, _d, _e;\n    super();\n    this.size = 0;\n    this.contentSize = 0;\n    this.proportions = undefined;\n    this.viewItems = [];\n    this.sashItems = []; // used in tests\n    this.state = State.Idle;\n    this._onDidSashChange = this._register(new Emitter());\n    this._onDidSashReset = this._register(new Emitter());\n    this._startSnappingEnabled = true;\n    this._endSnappingEnabled = true;\n    /**\n     * Fires whenever the user resizes a {@link Sash sash}.\n     */\n    this.onDidSashChange = this._onDidSashChange.event;\n    /**\n     * Fires whenever the user double clicks a {@link Sash sash}.\n     */\n    this.onDidSashReset = this._onDidSashReset.event;\n    this.orientation = (_a = options.orientation) !== null && _a !== void 0 ? _a : 0 /* Orientation.VERTICAL */;\n    this.inverseAltBehavior = (_b = options.inverseAltBehavior) !== null && _b !== void 0 ? _b : false;\n    this.proportionalLayout = (_c = options.proportionalLayout) !== null && _c !== void 0 ? _c : true;\n    this.getSashOrthogonalSize = options.getSashOrthogonalSize;\n    this.el = document.createElement('div');\n    this.el.classList.add('monaco-split-view2');\n    this.el.classList.add(this.orientation === 0 /* Orientation.VERTICAL */ ? 'vertical' : 'horizontal');\n    container.appendChild(this.el);\n    this.sashContainer = append(this.el, $('.sash-container'));\n    this.viewContainer = $('.split-view-container');\n    this.scrollable = this._register(new Scrollable({\n      forceIntegerValues: true,\n      smoothScrollDuration: 125,\n      scheduleAtNextAnimationFrame\n    }));\n    this.scrollableElement = this._register(new SmoothScrollableElement(this.viewContainer, {\n      vertical: this.orientation === 0 /* Orientation.VERTICAL */ ? (_d = options.scrollbarVisibility) !== null && _d !== void 0 ? _d : 1 /* ScrollbarVisibility.Auto */ : 2 /* ScrollbarVisibility.Hidden */,\n      horizontal: this.orientation === 1 /* Orientation.HORIZONTAL */ ? (_e = options.scrollbarVisibility) !== null && _e !== void 0 ? _e : 1 /* ScrollbarVisibility.Auto */ : 2 /* ScrollbarVisibility.Hidden */\n    }, this.scrollable));\n    // https://github.com/microsoft/vscode/issues/157737\n    const onDidScrollViewContainer = this._register(new DomEmitter(this.viewContainer, 'scroll')).event;\n    this._register(onDidScrollViewContainer(_ => {\n      const position = this.scrollableElement.getScrollPosition();\n      const scrollLeft = Math.abs(this.viewContainer.scrollLeft - position.scrollLeft) <= 1 ? undefined : this.viewContainer.scrollLeft;\n      const scrollTop = Math.abs(this.viewContainer.scrollTop - position.scrollTop) <= 1 ? undefined : this.viewContainer.scrollTop;\n      if (scrollLeft !== undefined || scrollTop !== undefined) {\n        this.scrollableElement.setScrollPosition({\n          scrollLeft,\n          scrollTop\n        });\n      }\n    }));\n    this.onDidScroll = this.scrollableElement.onScroll;\n    this._register(this.onDidScroll(e => {\n      if (e.scrollTopChanged) {\n        this.viewContainer.scrollTop = e.scrollTop;\n      }\n      if (e.scrollLeftChanged) {\n        this.viewContainer.scrollLeft = e.scrollLeft;\n      }\n    }));\n    append(this.el, this.scrollableElement.getDomNode());\n    this.style(options.styles || defaultStyles);\n    // We have an existing set of view, add them now\n    if (options.descriptor) {\n      this.size = options.descriptor.size;\n      options.descriptor.views.forEach((viewDescriptor, index) => {\n        const sizing = types.isUndefined(viewDescriptor.visible) || viewDescriptor.visible ? viewDescriptor.size : {\n          type: 'invisible',\n          cachedVisibleSize: viewDescriptor.size\n        };\n        const view = viewDescriptor.view;\n        this.doAddView(view, sizing, index, true);\n      });\n      // Initialize content size and proportions for first layout\n      this.contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n      this.saveProportions();\n    }\n  }\n  style(styles) {\n    if (styles.separatorBorder.isTransparent()) {\n      this.el.classList.remove('separator-border');\n      this.el.style.removeProperty('--separator-border');\n    } else {\n      this.el.classList.add('separator-border');\n      this.el.style.setProperty('--separator-border', styles.separatorBorder.toString());\n    }\n  }\n  /**\n   * Add a {@link IView view} to this {@link SplitView}.\n   *\n   * @param view The view to add.\n   * @param size Either a fixed size, or a dynamic {@link Sizing} strategy.\n   * @param index The index to insert the view on.\n   * @param skipLayout Whether layout should be skipped.\n   */\n  addView(view, size, index = this.viewItems.length, skipLayout) {\n    this.doAddView(view, size, index, skipLayout);\n  }\n  /**\n   * Layout the {@link SplitView}.\n   *\n   * @param size The entire size of the {@link SplitView}.\n   * @param layoutContext An optional layout context to pass along to {@link IView views}.\n   */\n  layout(size, layoutContext) {\n    const previousSize = Math.max(this.size, this.contentSize);\n    this.size = size;\n    this.layoutContext = layoutContext;\n    if (!this.proportions) {\n      const indexes = range(this.viewItems.length);\n      const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n      const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n      this.resize(this.viewItems.length - 1, size - previousSize, undefined, lowPriorityIndexes, highPriorityIndexes);\n    } else {\n      let total = 0;\n      for (let i = 0; i < this.viewItems.length; i++) {\n        const item = this.viewItems[i];\n        const proportion = this.proportions[i];\n        if (typeof proportion === 'number') {\n          total += proportion;\n        } else {\n          size -= item.size;\n        }\n      }\n      for (let i = 0; i < this.viewItems.length; i++) {\n        const item = this.viewItems[i];\n        const proportion = this.proportions[i];\n        if (typeof proportion === 'number') {\n          item.size = clamp(Math.round(proportion * size / total), item.minimumSize, item.maximumSize);\n        }\n      }\n    }\n    this.distributeEmptySpace();\n    this.layoutViews();\n  }\n  saveProportions() {\n    if (this.proportionalLayout && this.contentSize > 0) {\n      this.proportions = this.viewItems.map(i => i.proportionalLayout ? i.size / this.contentSize : undefined);\n    }\n  }\n  onSashStart({\n    sash,\n    start,\n    alt\n  }) {\n    for (const item of this.viewItems) {\n      item.enabled = false;\n    }\n    const index = this.sashItems.findIndex(item => item.sash === sash);\n    // This way, we can press Alt while we resize a sash, macOS style!\n    const disposable = combinedDisposable(addDisposableListener(document.body, 'keydown', e => resetSashDragState(this.sashDragState.current, e.altKey)), addDisposableListener(document.body, 'keyup', () => resetSashDragState(this.sashDragState.current, false)));\n    const resetSashDragState = (start, alt) => {\n      const sizes = this.viewItems.map(i => i.size);\n      let minDelta = Number.NEGATIVE_INFINITY;\n      let maxDelta = Number.POSITIVE_INFINITY;\n      if (this.inverseAltBehavior) {\n        alt = !alt;\n      }\n      if (alt) {\n        // When we're using the last sash with Alt, we're resizing\n        // the view to the left/up, instead of right/down as usual\n        // Thus, we must do the inverse of the usual\n        const isLastSash = index === this.sashItems.length - 1;\n        if (isLastSash) {\n          const viewItem = this.viewItems[index];\n          minDelta = (viewItem.minimumSize - viewItem.size) / 2;\n          maxDelta = (viewItem.maximumSize - viewItem.size) / 2;\n        } else {\n          const viewItem = this.viewItems[index + 1];\n          minDelta = (viewItem.size - viewItem.maximumSize) / 2;\n          maxDelta = (viewItem.size - viewItem.minimumSize) / 2;\n        }\n      }\n      let snapBefore;\n      let snapAfter;\n      if (!alt) {\n        const upIndexes = range(index, -1);\n        const downIndexes = range(index + 1, this.viewItems.length);\n        const minDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].minimumSize - sizes[i]), 0);\n        const maxDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].viewMaximumSize - sizes[i]), 0);\n        const maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].minimumSize), 0);\n        const minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].viewMaximumSize), 0);\n        const minDelta = Math.max(minDeltaUp, minDeltaDown);\n        const maxDelta = Math.min(maxDeltaDown, maxDeltaUp);\n        const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n        const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n        if (typeof snapBeforeIndex === 'number') {\n          const viewItem = this.viewItems[snapBeforeIndex];\n          const halfSize = Math.floor(viewItem.viewMinimumSize / 2);\n          snapBefore = {\n            index: snapBeforeIndex,\n            limitDelta: viewItem.visible ? minDelta - halfSize : minDelta + halfSize,\n            size: viewItem.size\n          };\n        }\n        if (typeof snapAfterIndex === 'number') {\n          const viewItem = this.viewItems[snapAfterIndex];\n          const halfSize = Math.floor(viewItem.viewMinimumSize / 2);\n          snapAfter = {\n            index: snapAfterIndex,\n            limitDelta: viewItem.visible ? maxDelta + halfSize : maxDelta - halfSize,\n            size: viewItem.size\n          };\n        }\n      }\n      this.sashDragState = {\n        start,\n        current: start,\n        index,\n        sizes,\n        minDelta,\n        maxDelta,\n        alt,\n        snapBefore,\n        snapAfter,\n        disposable\n      };\n    };\n    resetSashDragState(start, alt);\n  }\n  onSashChange({\n    current\n  }) {\n    const {\n      index,\n      start,\n      sizes,\n      alt,\n      minDelta,\n      maxDelta,\n      snapBefore,\n      snapAfter\n    } = this.sashDragState;\n    this.sashDragState.current = current;\n    const delta = current - start;\n    const newDelta = this.resize(index, delta, sizes, undefined, undefined, minDelta, maxDelta, snapBefore, snapAfter);\n    if (alt) {\n      const isLastSash = index === this.sashItems.length - 1;\n      const newSizes = this.viewItems.map(i => i.size);\n      const viewItemIndex = isLastSash ? index : index + 1;\n      const viewItem = this.viewItems[viewItemIndex];\n      const newMinDelta = viewItem.size - viewItem.maximumSize;\n      const newMaxDelta = viewItem.size - viewItem.minimumSize;\n      const resizeIndex = isLastSash ? index - 1 : index + 1;\n      this.resize(resizeIndex, -newDelta, newSizes, undefined, undefined, newMinDelta, newMaxDelta);\n    }\n    this.distributeEmptySpace();\n    this.layoutViews();\n  }\n  onSashEnd(index) {\n    this._onDidSashChange.fire(index);\n    this.sashDragState.disposable.dispose();\n    this.saveProportions();\n    for (const item of this.viewItems) {\n      item.enabled = true;\n    }\n  }\n  onViewChange(item, size) {\n    const index = this.viewItems.indexOf(item);\n    if (index < 0 || index >= this.viewItems.length) {\n      return;\n    }\n    size = typeof size === 'number' ? size : item.size;\n    size = clamp(size, item.minimumSize, item.maximumSize);\n    if (this.inverseAltBehavior && index > 0) {\n      // In this case, we want the view to grow or shrink both sides equally\n      // so we just resize the \"left\" side by half and let `resize` do the clamping magic\n      this.resize(index - 1, Math.floor((item.size - size) / 2));\n      this.distributeEmptySpace();\n      this.layoutViews();\n    } else {\n      item.size = size;\n      this.relayout([index], undefined);\n    }\n  }\n  /**\n   * Resize a {@link IView view} within the {@link SplitView}.\n   *\n   * @param index The {@link IView view} index.\n   * @param size The {@link IView view} size.\n   */\n  resizeView(index, size) {\n    if (this.state !== State.Idle) {\n      throw new Error('Cant modify splitview');\n    }\n    this.state = State.Busy;\n    if (index < 0 || index >= this.viewItems.length) {\n      return;\n    }\n    const indexes = range(this.viewItems.length).filter(i => i !== index);\n    const lowPriorityIndexes = [...indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */), index];\n    const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n    const item = this.viewItems[index];\n    size = Math.round(size);\n    size = clamp(size, item.minimumSize, Math.min(item.maximumSize, this.size));\n    item.size = size;\n    this.relayout(lowPriorityIndexes, highPriorityIndexes);\n    this.state = State.Idle;\n  }\n  /**\n   * Distribute the entire {@link SplitView} size among all {@link IView views}.\n   */\n  distributeViewSizes() {\n    const flexibleViewItems = [];\n    let flexibleSize = 0;\n    for (const item of this.viewItems) {\n      if (item.maximumSize - item.minimumSize > 0) {\n        flexibleViewItems.push(item);\n        flexibleSize += item.size;\n      }\n    }\n    const size = Math.floor(flexibleSize / flexibleViewItems.length);\n    for (const item of flexibleViewItems) {\n      item.size = clamp(size, item.minimumSize, item.maximumSize);\n    }\n    const indexes = range(this.viewItems.length);\n    const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n    const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n    this.relayout(lowPriorityIndexes, highPriorityIndexes);\n  }\n  /**\n   * Returns the size of a {@link IView view}.\n   */\n  getViewSize(index) {\n    if (index < 0 || index >= this.viewItems.length) {\n      return -1;\n    }\n    return this.viewItems[index].size;\n  }\n  doAddView(view, size, index = this.viewItems.length, skipLayout) {\n    if (this.state !== State.Idle) {\n      throw new Error('Cant modify splitview');\n    }\n    this.state = State.Busy;\n    // Add view\n    const container = $('.split-view-view');\n    if (index === this.viewItems.length) {\n      this.viewContainer.appendChild(container);\n    } else {\n      this.viewContainer.insertBefore(container, this.viewContainer.children.item(index));\n    }\n    const onChangeDisposable = view.onDidChange(size => this.onViewChange(item, size));\n    const containerDisposable = toDisposable(() => this.viewContainer.removeChild(container));\n    const disposable = combinedDisposable(onChangeDisposable, containerDisposable);\n    let viewSize;\n    if (typeof size === 'number') {\n      viewSize = size;\n    } else {\n      if (size.type === 'auto') {\n        if (this.areViewsDistributed()) {\n          size = {\n            type: 'distribute'\n          };\n        } else {\n          size = {\n            type: 'split',\n            index: size.index\n          };\n        }\n      }\n      if (size.type === 'split') {\n        viewSize = this.getViewSize(size.index) / 2;\n      } else if (size.type === 'invisible') {\n        viewSize = {\n          cachedVisibleSize: size.cachedVisibleSize\n        };\n      } else {\n        viewSize = view.minimumSize;\n      }\n    }\n    const item = this.orientation === 0 /* Orientation.VERTICAL */ ? new VerticalViewItem(container, view, viewSize, disposable) : new HorizontalViewItem(container, view, viewSize, disposable);\n    this.viewItems.splice(index, 0, item);\n    // Add sash\n    if (this.viewItems.length > 1) {\n      const opts = {\n        orthogonalStartSash: this.orthogonalStartSash,\n        orthogonalEndSash: this.orthogonalEndSash\n      };\n      const sash = this.orientation === 0 /* Orientation.VERTICAL */ ? new Sash(this.sashContainer, {\n        getHorizontalSashTop: s => this.getSashPosition(s),\n        getHorizontalSashWidth: this.getSashOrthogonalSize\n      }, Object.assign(Object.assign({}, opts), {\n        orientation: 1 /* Orientation.HORIZONTAL */\n      })) : new Sash(this.sashContainer, {\n        getVerticalSashLeft: s => this.getSashPosition(s),\n        getVerticalSashHeight: this.getSashOrthogonalSize\n      }, Object.assign(Object.assign({}, opts), {\n        orientation: 0 /* Orientation.VERTICAL */\n      }));\n      const sashEventMapper = this.orientation === 0 /* Orientation.VERTICAL */ ? e => ({\n        sash,\n        start: e.startY,\n        current: e.currentY,\n        alt: e.altKey\n      }) : e => ({\n        sash,\n        start: e.startX,\n        current: e.currentX,\n        alt: e.altKey\n      });\n      const onStart = Event.map(sash.onDidStart, sashEventMapper);\n      const onStartDisposable = onStart(this.onSashStart, this);\n      const onChange = Event.map(sash.onDidChange, sashEventMapper);\n      const onChangeDisposable = onChange(this.onSashChange, this);\n      const onEnd = Event.map(sash.onDidEnd, () => this.sashItems.findIndex(item => item.sash === sash));\n      const onEndDisposable = onEnd(this.onSashEnd, this);\n      const onDidResetDisposable = sash.onDidReset(() => {\n        const index = this.sashItems.findIndex(item => item.sash === sash);\n        const upIndexes = range(index, -1);\n        const downIndexes = range(index + 1, this.viewItems.length);\n        const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n        const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n        if (typeof snapBeforeIndex === 'number' && !this.viewItems[snapBeforeIndex].visible) {\n          return;\n        }\n        if (typeof snapAfterIndex === 'number' && !this.viewItems[snapAfterIndex].visible) {\n          return;\n        }\n        this._onDidSashReset.fire(index);\n      });\n      const disposable = combinedDisposable(onStartDisposable, onChangeDisposable, onEndDisposable, onDidResetDisposable, sash);\n      const sashItem = {\n        sash,\n        disposable\n      };\n      this.sashItems.splice(index - 1, 0, sashItem);\n    }\n    container.appendChild(view.element);\n    let highPriorityIndexes;\n    if (typeof size !== 'number' && size.type === 'split') {\n      highPriorityIndexes = [size.index];\n    }\n    if (!skipLayout) {\n      this.relayout([index], highPriorityIndexes);\n    }\n    this.state = State.Idle;\n    if (!skipLayout && typeof size !== 'number' && size.type === 'distribute') {\n      this.distributeViewSizes();\n    }\n  }\n  relayout(lowPriorityIndexes, highPriorityIndexes) {\n    const contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n    this.resize(this.viewItems.length - 1, this.size - contentSize, undefined, lowPriorityIndexes, highPriorityIndexes);\n    this.distributeEmptySpace();\n    this.layoutViews();\n    this.saveProportions();\n  }\n  resize(index, delta, sizes = this.viewItems.map(i => i.size), lowPriorityIndexes, highPriorityIndexes, overloadMinDelta = Number.NEGATIVE_INFINITY, overloadMaxDelta = Number.POSITIVE_INFINITY, snapBefore, snapAfter) {\n    if (index < 0 || index >= this.viewItems.length) {\n      return 0;\n    }\n    const upIndexes = range(index, -1);\n    const downIndexes = range(index + 1, this.viewItems.length);\n    if (highPriorityIndexes) {\n      for (const index of highPriorityIndexes) {\n        pushToStart(upIndexes, index);\n        pushToStart(downIndexes, index);\n      }\n    }\n    if (lowPriorityIndexes) {\n      for (const index of lowPriorityIndexes) {\n        pushToEnd(upIndexes, index);\n        pushToEnd(downIndexes, index);\n      }\n    }\n    const upItems = upIndexes.map(i => this.viewItems[i]);\n    const upSizes = upIndexes.map(i => sizes[i]);\n    const downItems = downIndexes.map(i => this.viewItems[i]);\n    const downSizes = downIndexes.map(i => sizes[i]);\n    const minDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].minimumSize - sizes[i]), 0);\n    const maxDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].maximumSize - sizes[i]), 0);\n    const maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].minimumSize), 0);\n    const minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].maximumSize), 0);\n    const minDelta = Math.max(minDeltaUp, minDeltaDown, overloadMinDelta);\n    const maxDelta = Math.min(maxDeltaDown, maxDeltaUp, overloadMaxDelta);\n    let snapped = false;\n    if (snapBefore) {\n      const snapView = this.viewItems[snapBefore.index];\n      const visible = delta >= snapBefore.limitDelta;\n      snapped = visible !== snapView.visible;\n      snapView.setVisible(visible, snapBefore.size);\n    }\n    if (!snapped && snapAfter) {\n      const snapView = this.viewItems[snapAfter.index];\n      const visible = delta < snapAfter.limitDelta;\n      snapped = visible !== snapView.visible;\n      snapView.setVisible(visible, snapAfter.size);\n    }\n    if (snapped) {\n      return this.resize(index, delta, sizes, lowPriorityIndexes, highPriorityIndexes, overloadMinDelta, overloadMaxDelta);\n    }\n    delta = clamp(delta, minDelta, maxDelta);\n    for (let i = 0, deltaUp = delta; i < upItems.length; i++) {\n      const item = upItems[i];\n      const size = clamp(upSizes[i] + deltaUp, item.minimumSize, item.maximumSize);\n      const viewDelta = size - upSizes[i];\n      deltaUp -= viewDelta;\n      item.size = size;\n    }\n    for (let i = 0, deltaDown = delta; i < downItems.length; i++) {\n      const item = downItems[i];\n      const size = clamp(downSizes[i] - deltaDown, item.minimumSize, item.maximumSize);\n      const viewDelta = size - downSizes[i];\n      deltaDown += viewDelta;\n      item.size = size;\n    }\n    return delta;\n  }\n  distributeEmptySpace(lowPriorityIndex) {\n    const contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n    let emptyDelta = this.size - contentSize;\n    const indexes = range(this.viewItems.length - 1, -1);\n    const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n    const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n    for (const index of highPriorityIndexes) {\n      pushToStart(indexes, index);\n    }\n    for (const index of lowPriorityIndexes) {\n      pushToEnd(indexes, index);\n    }\n    if (typeof lowPriorityIndex === 'number') {\n      pushToEnd(indexes, lowPriorityIndex);\n    }\n    for (let i = 0; emptyDelta !== 0 && i < indexes.length; i++) {\n      const item = this.viewItems[indexes[i]];\n      const size = clamp(item.size + emptyDelta, item.minimumSize, item.maximumSize);\n      const viewDelta = size - item.size;\n      emptyDelta -= viewDelta;\n      item.size = size;\n    }\n  }\n  layoutViews() {\n    // Save new content size\n    this.contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n    // Layout views\n    let offset = 0;\n    for (const viewItem of this.viewItems) {\n      viewItem.layout(offset, this.layoutContext);\n      offset += viewItem.size;\n    }\n    // Layout sashes\n    this.sashItems.forEach(item => item.sash.layout());\n    this.updateSashEnablement();\n    this.updateScrollableElement();\n  }\n  updateScrollableElement() {\n    if (this.orientation === 0 /* Orientation.VERTICAL */) {\n      this.scrollableElement.setScrollDimensions({\n        height: this.size,\n        scrollHeight: this.contentSize\n      });\n    } else {\n      this.scrollableElement.setScrollDimensions({\n        width: this.size,\n        scrollWidth: this.contentSize\n      });\n    }\n  }\n  updateSashEnablement() {\n    let previous = false;\n    const collapsesDown = this.viewItems.map(i => previous = i.size - i.minimumSize > 0 || previous);\n    previous = false;\n    const expandsDown = this.viewItems.map(i => previous = i.maximumSize - i.size > 0 || previous);\n    const reverseViews = [...this.viewItems].reverse();\n    previous = false;\n    const collapsesUp = reverseViews.map(i => previous = i.size - i.minimumSize > 0 || previous).reverse();\n    previous = false;\n    const expandsUp = reverseViews.map(i => previous = i.maximumSize - i.size > 0 || previous).reverse();\n    let position = 0;\n    for (let index = 0; index < this.sashItems.length; index++) {\n      const {\n        sash\n      } = this.sashItems[index];\n      const viewItem = this.viewItems[index];\n      position += viewItem.size;\n      const min = !(collapsesDown[index] && expandsUp[index + 1]);\n      const max = !(expandsDown[index] && collapsesUp[index + 1]);\n      if (min && max) {\n        const upIndexes = range(index, -1);\n        const downIndexes = range(index + 1, this.viewItems.length);\n        const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n        const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n        const snappedBefore = typeof snapBeforeIndex === 'number' && !this.viewItems[snapBeforeIndex].visible;\n        const snappedAfter = typeof snapAfterIndex === 'number' && !this.viewItems[snapAfterIndex].visible;\n        if (snappedBefore && collapsesUp[index] && (position > 0 || this.startSnappingEnabled)) {\n          sash.state = 1 /* SashState.AtMinimum */;\n        } else if (snappedAfter && collapsesDown[index] && (position < this.contentSize || this.endSnappingEnabled)) {\n          sash.state = 2 /* SashState.AtMaximum */;\n        } else {\n          sash.state = 0 /* SashState.Disabled */;\n        }\n      } else if (min && !max) {\n        sash.state = 1 /* SashState.AtMinimum */;\n      } else if (!min && max) {\n        sash.state = 2 /* SashState.AtMaximum */;\n      } else {\n        sash.state = 3 /* SashState.Enabled */;\n      }\n    }\n  }\n\n  getSashPosition(sash) {\n    let position = 0;\n    for (let i = 0; i < this.sashItems.length; i++) {\n      position += this.viewItems[i].size;\n      if (this.sashItems[i].sash === sash) {\n        return position;\n      }\n    }\n    return 0;\n  }\n  findFirstSnapIndex(indexes) {\n    // visible views first\n    for (const index of indexes) {\n      const viewItem = this.viewItems[index];\n      if (!viewItem.visible) {\n        continue;\n      }\n      if (viewItem.snap) {\n        return index;\n      }\n    }\n    // then, hidden views\n    for (const index of indexes) {\n      const viewItem = this.viewItems[index];\n      if (viewItem.visible && viewItem.maximumSize - viewItem.minimumSize > 0) {\n        return undefined;\n      }\n      if (!viewItem.visible && viewItem.snap) {\n        return index;\n      }\n    }\n    return undefined;\n  }\n  areViewsDistributed() {\n    let min = undefined,\n      max = undefined;\n    for (const view of this.viewItems) {\n      min = min === undefined ? view.size : Math.min(min, view.size);\n      max = max === undefined ? view.size : Math.max(max, view.size);\n      if (max - min > 2) {\n        return false;\n      }\n    }\n    return true;\n  }\n  dispose() {\n    var _a;\n    (_a = this.sashDragState) === null || _a === void 0 ? void 0 : _a.disposable.dispose();\n    dispose(this.viewItems);\n    this.viewItems = [];\n    this.sashItems.forEach(i => i.disposable.dispose());\n    this.sashItems = [];\n    super.dispose();\n  }\n}","map":{"version":3,"names":["$","addDisposableListener","append","scheduleAtNextAnimationFrame","DomEmitter","Sash","SmoothScrollableElement","pushToEnd","pushToStart","range","Color","Emitter","Event","combinedDisposable","Disposable","dispose","toDisposable","clamp","Scrollable","types","defaultStyles","separatorBorder","transparent","ViewItem","size","_size","visible","_cachedVisibleSize","setVisible","_a","_b","viewMinimumSize","viewMaximumSize","undefined","container","classList","toggle","view","call","minimumSize","maximumSize","priority","proportionalLayout","snap","enabled","style","pointerEvents","constructor","disposable","add","cachedVisibleSize","layout","offset","layoutContext","layoutContainer","VerticalViewItem","top","height","HorizontalViewItem","left","width","State","Sizing","Distribute","type","Split","index","Auto","Invisible","SplitView","orthogonalStartSash","_orthogonalStartSash","orthogonalEndSash","_orthogonalEndSash","startSnappingEnabled","_startSnappingEnabled","endSnappingEnabled","_endSnappingEnabled","sash","sashItem","sashItems","updateSashEnablement","options","_c","_d","_e","contentSize","proportions","viewItems","state","Idle","_onDidSashChange","_register","_onDidSashReset","onDidSashChange","event","onDidSashReset","orientation","inverseAltBehavior","getSashOrthogonalSize","el","document","createElement","appendChild","sashContainer","viewContainer","scrollable","forceIntegerValues","smoothScrollDuration","scrollableElement","vertical","scrollbarVisibility","horizontal","onDidScrollViewContainer","_","position","getScrollPosition","scrollLeft","Math","abs","scrollTop","setScrollPosition","onDidScroll","onScroll","e","scrollTopChanged","scrollLeftChanged","getDomNode","styles","descriptor","views","forEach","viewDescriptor","sizing","isUndefined","doAddView","reduce","r","i","saveProportions","isTransparent","remove","removeProperty","setProperty","toString","addView","length","skipLayout","previousSize","max","indexes","lowPriorityIndexes","filter","highPriorityIndexes","resize","total","item","proportion","round","distributeEmptySpace","layoutViews","map","onSashStart","start","alt","findIndex","body","resetSashDragState","sashDragState","current","altKey","sizes","minDelta","Number","NEGATIVE_INFINITY","maxDelta","POSITIVE_INFINITY","isLastSash","viewItem","snapBefore","snapAfter","upIndexes","downIndexes","minDeltaUp","maxDeltaUp","maxDeltaDown","minDeltaDown","min","snapBeforeIndex","findFirstSnapIndex","snapAfterIndex","halfSize","floor","limitDelta","onSashChange","delta","newDelta","newSizes","viewItemIndex","newMinDelta","newMaxDelta","resizeIndex","onSashEnd","fire","onViewChange","indexOf","relayout","resizeView","Error","Busy","distributeViewSizes","flexibleViewItems","flexibleSize","push","getViewSize","insertBefore","children","onChangeDisposable","onDidChange","containerDisposable","removeChild","viewSize","areViewsDistributed","splice","opts","getHorizontalSashTop","s","getSashPosition","getHorizontalSashWidth","Object","assign","getVerticalSashLeft","getVerticalSashHeight","sashEventMapper","startY","currentY","startX","currentX","onStart","onDidStart","onStartDisposable","onChange","onEnd","onDidEnd","onEndDisposable","onDidResetDisposable","onDidReset","element","overloadMinDelta","overloadMaxDelta","upItems","upSizes","downItems","downSizes","snapped","snapView","deltaUp","viewDelta","deltaDown","lowPriorityIndex","emptyDelta","updateScrollableElement","setScrollDimensions","scrollHeight","scrollWidth","previous","collapsesDown","expandsDown","reverseViews","reverse","collapsesUp","expandsUp","snappedBefore","snappedAfter"],"sources":["/home/chlohest/work/website/my_web/node_modules/monaco-editor/esm/vs/base/browser/ui/splitview/splitview.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, addDisposableListener, append, scheduleAtNextAnimationFrame } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { Sash } from '../sash/sash.js';\nimport { SmoothScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { pushToEnd, pushToStart, range } from '../../../common/arrays.js';\nimport { Color } from '../../../common/color.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { combinedDisposable, Disposable, dispose, toDisposable } from '../../../common/lifecycle.js';\nimport { clamp } from '../../../common/numbers.js';\nimport { Scrollable } from '../../../common/scrollable.js';\nimport * as types from '../../../common/types.js';\nimport './splitview.css';\nconst defaultStyles = {\n    separatorBorder: Color.transparent\n};\nclass ViewItem {\n    set size(size) {\n        this._size = size;\n    }\n    get size() {\n        return this._size;\n    }\n    get visible() {\n        return typeof this._cachedVisibleSize === 'undefined';\n    }\n    setVisible(visible, size) {\n        var _a, _b;\n        if (visible === this.visible) {\n            return;\n        }\n        if (visible) {\n            this.size = clamp(this._cachedVisibleSize, this.viewMinimumSize, this.viewMaximumSize);\n            this._cachedVisibleSize = undefined;\n        }\n        else {\n            this._cachedVisibleSize = typeof size === 'number' ? size : this.size;\n            this.size = 0;\n        }\n        this.container.classList.toggle('visible', visible);\n        (_b = (_a = this.view).setVisible) === null || _b === void 0 ? void 0 : _b.call(_a, visible);\n    }\n    get minimumSize() { return this.visible ? this.view.minimumSize : 0; }\n    get viewMinimumSize() { return this.view.minimumSize; }\n    get maximumSize() { return this.visible ? this.view.maximumSize : 0; }\n    get viewMaximumSize() { return this.view.maximumSize; }\n    get priority() { return this.view.priority; }\n    get proportionalLayout() { var _a; return (_a = this.view.proportionalLayout) !== null && _a !== void 0 ? _a : true; }\n    get snap() { return !!this.view.snap; }\n    set enabled(enabled) {\n        this.container.style.pointerEvents = enabled ? '' : 'none';\n    }\n    constructor(container, view, size, disposable) {\n        this.container = container;\n        this.view = view;\n        this.disposable = disposable;\n        this._cachedVisibleSize = undefined;\n        if (typeof size === 'number') {\n            this._size = size;\n            this._cachedVisibleSize = undefined;\n            container.classList.add('visible');\n        }\n        else {\n            this._size = 0;\n            this._cachedVisibleSize = size.cachedVisibleSize;\n        }\n    }\n    layout(offset, layoutContext) {\n        this.layoutContainer(offset);\n        this.view.layout(this.size, offset, layoutContext);\n    }\n    dispose() {\n        this.disposable.dispose();\n    }\n}\nclass VerticalViewItem extends ViewItem {\n    layoutContainer(offset) {\n        this.container.style.top = `${offset}px`;\n        this.container.style.height = `${this.size}px`;\n    }\n}\nclass HorizontalViewItem extends ViewItem {\n    layoutContainer(offset) {\n        this.container.style.left = `${offset}px`;\n        this.container.style.width = `${this.size}px`;\n    }\n}\nvar State;\n(function (State) {\n    State[State[\"Idle\"] = 0] = \"Idle\";\n    State[State[\"Busy\"] = 1] = \"Busy\";\n})(State || (State = {}));\nexport var Sizing;\n(function (Sizing) {\n    /**\n     * When adding or removing views, distribute the delta space among\n     * all other views.\n     */\n    Sizing.Distribute = { type: 'distribute' };\n    /**\n     * When adding or removing views, split the delta space with another\n     * specific view, indexed by the provided `index`.\n     */\n    function Split(index) { return { type: 'split', index }; }\n    Sizing.Split = Split;\n    /**\n     * When adding a view, use DistributeSizing when all pre-existing views are\n     * distributed evenly, otherwise use SplitSizing.\n     */\n    function Auto(index) { return { type: 'auto', index }; }\n    Sizing.Auto = Auto;\n    /**\n     * When adding or removing views, assume the view is invisible.\n     */\n    function Invisible(cachedVisibleSize) { return { type: 'invisible', cachedVisibleSize }; }\n    Sizing.Invisible = Invisible;\n})(Sizing || (Sizing = {}));\n/**\n * The {@link SplitView} is the UI component which implements a one dimensional\n * flex-like layout algorithm for a collection of {@link IView} instances, which\n * are essentially HTMLElement instances with the following size constraints:\n *\n * - {@link IView.minimumSize}\n * - {@link IView.maximumSize}\n * - {@link IView.priority}\n * - {@link IView.snap}\n *\n * In case the SplitView doesn't have enough size to fit all views, it will overflow\n * its content with a scrollbar.\n *\n * In between each pair of views there will be a {@link Sash} allowing the user\n * to resize the views, making sure the constraints are respected.\n *\n * An optional {@link TLayoutContext layout context type} may be used in order to\n * pass along layout contextual data from the {@link SplitView.layout} method down\n * to each view's {@link IView.layout} calls.\n *\n * Features:\n * - Flex-like layout algorithm\n * - Snap support\n * - Orthogonal sash support, for corner sashes\n * - View hide/show support\n * - View swap/move support\n * - Alt key modifier behavior, macOS style\n */\nexport class SplitView extends Disposable {\n    get orthogonalStartSash() { return this._orthogonalStartSash; }\n    get orthogonalEndSash() { return this._orthogonalEndSash; }\n    get startSnappingEnabled() { return this._startSnappingEnabled; }\n    get endSnappingEnabled() { return this._endSnappingEnabled; }\n    /**\n     * A reference to a sash, perpendicular to all sashes in this {@link SplitView},\n     * located at the left- or top-most side of the SplitView.\n     * Corner sashes will be created automatically at the intersections.\n     */\n    set orthogonalStartSash(sash) {\n        for (const sashItem of this.sashItems) {\n            sashItem.sash.orthogonalStartSash = sash;\n        }\n        this._orthogonalStartSash = sash;\n    }\n    /**\n     * A reference to a sash, perpendicular to all sashes in this {@link SplitView},\n     * located at the right- or bottom-most side of the SplitView.\n     * Corner sashes will be created automatically at the intersections.\n     */\n    set orthogonalEndSash(sash) {\n        for (const sashItem of this.sashItems) {\n            sashItem.sash.orthogonalEndSash = sash;\n        }\n        this._orthogonalEndSash = sash;\n    }\n    /**\n     * Enable/disable snapping at the beginning of this {@link SplitView}.\n     */\n    set startSnappingEnabled(startSnappingEnabled) {\n        if (this._startSnappingEnabled === startSnappingEnabled) {\n            return;\n        }\n        this._startSnappingEnabled = startSnappingEnabled;\n        this.updateSashEnablement();\n    }\n    /**\n     * Enable/disable snapping at the end of this {@link SplitView}.\n     */\n    set endSnappingEnabled(endSnappingEnabled) {\n        if (this._endSnappingEnabled === endSnappingEnabled) {\n            return;\n        }\n        this._endSnappingEnabled = endSnappingEnabled;\n        this.updateSashEnablement();\n    }\n    /**\n     * Create a new {@link SplitView} instance.\n     */\n    constructor(container, options = {}) {\n        var _a, _b, _c, _d, _e;\n        super();\n        this.size = 0;\n        this.contentSize = 0;\n        this.proportions = undefined;\n        this.viewItems = [];\n        this.sashItems = []; // used in tests\n        this.state = State.Idle;\n        this._onDidSashChange = this._register(new Emitter());\n        this._onDidSashReset = this._register(new Emitter());\n        this._startSnappingEnabled = true;\n        this._endSnappingEnabled = true;\n        /**\n         * Fires whenever the user resizes a {@link Sash sash}.\n         */\n        this.onDidSashChange = this._onDidSashChange.event;\n        /**\n         * Fires whenever the user double clicks a {@link Sash sash}.\n         */\n        this.onDidSashReset = this._onDidSashReset.event;\n        this.orientation = (_a = options.orientation) !== null && _a !== void 0 ? _a : 0 /* Orientation.VERTICAL */;\n        this.inverseAltBehavior = (_b = options.inverseAltBehavior) !== null && _b !== void 0 ? _b : false;\n        this.proportionalLayout = (_c = options.proportionalLayout) !== null && _c !== void 0 ? _c : true;\n        this.getSashOrthogonalSize = options.getSashOrthogonalSize;\n        this.el = document.createElement('div');\n        this.el.classList.add('monaco-split-view2');\n        this.el.classList.add(this.orientation === 0 /* Orientation.VERTICAL */ ? 'vertical' : 'horizontal');\n        container.appendChild(this.el);\n        this.sashContainer = append(this.el, $('.sash-container'));\n        this.viewContainer = $('.split-view-container');\n        this.scrollable = this._register(new Scrollable({\n            forceIntegerValues: true,\n            smoothScrollDuration: 125,\n            scheduleAtNextAnimationFrame\n        }));\n        this.scrollableElement = this._register(new SmoothScrollableElement(this.viewContainer, {\n            vertical: this.orientation === 0 /* Orientation.VERTICAL */ ? ((_d = options.scrollbarVisibility) !== null && _d !== void 0 ? _d : 1 /* ScrollbarVisibility.Auto */) : 2 /* ScrollbarVisibility.Hidden */,\n            horizontal: this.orientation === 1 /* Orientation.HORIZONTAL */ ? ((_e = options.scrollbarVisibility) !== null && _e !== void 0 ? _e : 1 /* ScrollbarVisibility.Auto */) : 2 /* ScrollbarVisibility.Hidden */\n        }, this.scrollable));\n        // https://github.com/microsoft/vscode/issues/157737\n        const onDidScrollViewContainer = this._register(new DomEmitter(this.viewContainer, 'scroll')).event;\n        this._register(onDidScrollViewContainer(_ => {\n            const position = this.scrollableElement.getScrollPosition();\n            const scrollLeft = Math.abs(this.viewContainer.scrollLeft - position.scrollLeft) <= 1 ? undefined : this.viewContainer.scrollLeft;\n            const scrollTop = Math.abs(this.viewContainer.scrollTop - position.scrollTop) <= 1 ? undefined : this.viewContainer.scrollTop;\n            if (scrollLeft !== undefined || scrollTop !== undefined) {\n                this.scrollableElement.setScrollPosition({ scrollLeft, scrollTop });\n            }\n        }));\n        this.onDidScroll = this.scrollableElement.onScroll;\n        this._register(this.onDidScroll(e => {\n            if (e.scrollTopChanged) {\n                this.viewContainer.scrollTop = e.scrollTop;\n            }\n            if (e.scrollLeftChanged) {\n                this.viewContainer.scrollLeft = e.scrollLeft;\n            }\n        }));\n        append(this.el, this.scrollableElement.getDomNode());\n        this.style(options.styles || defaultStyles);\n        // We have an existing set of view, add them now\n        if (options.descriptor) {\n            this.size = options.descriptor.size;\n            options.descriptor.views.forEach((viewDescriptor, index) => {\n                const sizing = types.isUndefined(viewDescriptor.visible) || viewDescriptor.visible ? viewDescriptor.size : { type: 'invisible', cachedVisibleSize: viewDescriptor.size };\n                const view = viewDescriptor.view;\n                this.doAddView(view, sizing, index, true);\n            });\n            // Initialize content size and proportions for first layout\n            this.contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n            this.saveProportions();\n        }\n    }\n    style(styles) {\n        if (styles.separatorBorder.isTransparent()) {\n            this.el.classList.remove('separator-border');\n            this.el.style.removeProperty('--separator-border');\n        }\n        else {\n            this.el.classList.add('separator-border');\n            this.el.style.setProperty('--separator-border', styles.separatorBorder.toString());\n        }\n    }\n    /**\n     * Add a {@link IView view} to this {@link SplitView}.\n     *\n     * @param view The view to add.\n     * @param size Either a fixed size, or a dynamic {@link Sizing} strategy.\n     * @param index The index to insert the view on.\n     * @param skipLayout Whether layout should be skipped.\n     */\n    addView(view, size, index = this.viewItems.length, skipLayout) {\n        this.doAddView(view, size, index, skipLayout);\n    }\n    /**\n     * Layout the {@link SplitView}.\n     *\n     * @param size The entire size of the {@link SplitView}.\n     * @param layoutContext An optional layout context to pass along to {@link IView views}.\n     */\n    layout(size, layoutContext) {\n        const previousSize = Math.max(this.size, this.contentSize);\n        this.size = size;\n        this.layoutContext = layoutContext;\n        if (!this.proportions) {\n            const indexes = range(this.viewItems.length);\n            const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n            const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n            this.resize(this.viewItems.length - 1, size - previousSize, undefined, lowPriorityIndexes, highPriorityIndexes);\n        }\n        else {\n            let total = 0;\n            for (let i = 0; i < this.viewItems.length; i++) {\n                const item = this.viewItems[i];\n                const proportion = this.proportions[i];\n                if (typeof proportion === 'number') {\n                    total += proportion;\n                }\n                else {\n                    size -= item.size;\n                }\n            }\n            for (let i = 0; i < this.viewItems.length; i++) {\n                const item = this.viewItems[i];\n                const proportion = this.proportions[i];\n                if (typeof proportion === 'number') {\n                    item.size = clamp(Math.round(proportion * size / total), item.minimumSize, item.maximumSize);\n                }\n            }\n        }\n        this.distributeEmptySpace();\n        this.layoutViews();\n    }\n    saveProportions() {\n        if (this.proportionalLayout && this.contentSize > 0) {\n            this.proportions = this.viewItems.map(i => i.proportionalLayout ? i.size / this.contentSize : undefined);\n        }\n    }\n    onSashStart({ sash, start, alt }) {\n        for (const item of this.viewItems) {\n            item.enabled = false;\n        }\n        const index = this.sashItems.findIndex(item => item.sash === sash);\n        // This way, we can press Alt while we resize a sash, macOS style!\n        const disposable = combinedDisposable(addDisposableListener(document.body, 'keydown', e => resetSashDragState(this.sashDragState.current, e.altKey)), addDisposableListener(document.body, 'keyup', () => resetSashDragState(this.sashDragState.current, false)));\n        const resetSashDragState = (start, alt) => {\n            const sizes = this.viewItems.map(i => i.size);\n            let minDelta = Number.NEGATIVE_INFINITY;\n            let maxDelta = Number.POSITIVE_INFINITY;\n            if (this.inverseAltBehavior) {\n                alt = !alt;\n            }\n            if (alt) {\n                // When we're using the last sash with Alt, we're resizing\n                // the view to the left/up, instead of right/down as usual\n                // Thus, we must do the inverse of the usual\n                const isLastSash = index === this.sashItems.length - 1;\n                if (isLastSash) {\n                    const viewItem = this.viewItems[index];\n                    minDelta = (viewItem.minimumSize - viewItem.size) / 2;\n                    maxDelta = (viewItem.maximumSize - viewItem.size) / 2;\n                }\n                else {\n                    const viewItem = this.viewItems[index + 1];\n                    minDelta = (viewItem.size - viewItem.maximumSize) / 2;\n                    maxDelta = (viewItem.size - viewItem.minimumSize) / 2;\n                }\n            }\n            let snapBefore;\n            let snapAfter;\n            if (!alt) {\n                const upIndexes = range(index, -1);\n                const downIndexes = range(index + 1, this.viewItems.length);\n                const minDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].minimumSize - sizes[i]), 0);\n                const maxDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].viewMaximumSize - sizes[i]), 0);\n                const maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].minimumSize), 0);\n                const minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].viewMaximumSize), 0);\n                const minDelta = Math.max(minDeltaUp, minDeltaDown);\n                const maxDelta = Math.min(maxDeltaDown, maxDeltaUp);\n                const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n                const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n                if (typeof snapBeforeIndex === 'number') {\n                    const viewItem = this.viewItems[snapBeforeIndex];\n                    const halfSize = Math.floor(viewItem.viewMinimumSize / 2);\n                    snapBefore = {\n                        index: snapBeforeIndex,\n                        limitDelta: viewItem.visible ? minDelta - halfSize : minDelta + halfSize,\n                        size: viewItem.size\n                    };\n                }\n                if (typeof snapAfterIndex === 'number') {\n                    const viewItem = this.viewItems[snapAfterIndex];\n                    const halfSize = Math.floor(viewItem.viewMinimumSize / 2);\n                    snapAfter = {\n                        index: snapAfterIndex,\n                        limitDelta: viewItem.visible ? maxDelta + halfSize : maxDelta - halfSize,\n                        size: viewItem.size\n                    };\n                }\n            }\n            this.sashDragState = { start, current: start, index, sizes, minDelta, maxDelta, alt, snapBefore, snapAfter, disposable };\n        };\n        resetSashDragState(start, alt);\n    }\n    onSashChange({ current }) {\n        const { index, start, sizes, alt, minDelta, maxDelta, snapBefore, snapAfter } = this.sashDragState;\n        this.sashDragState.current = current;\n        const delta = current - start;\n        const newDelta = this.resize(index, delta, sizes, undefined, undefined, minDelta, maxDelta, snapBefore, snapAfter);\n        if (alt) {\n            const isLastSash = index === this.sashItems.length - 1;\n            const newSizes = this.viewItems.map(i => i.size);\n            const viewItemIndex = isLastSash ? index : index + 1;\n            const viewItem = this.viewItems[viewItemIndex];\n            const newMinDelta = viewItem.size - viewItem.maximumSize;\n            const newMaxDelta = viewItem.size - viewItem.minimumSize;\n            const resizeIndex = isLastSash ? index - 1 : index + 1;\n            this.resize(resizeIndex, -newDelta, newSizes, undefined, undefined, newMinDelta, newMaxDelta);\n        }\n        this.distributeEmptySpace();\n        this.layoutViews();\n    }\n    onSashEnd(index) {\n        this._onDidSashChange.fire(index);\n        this.sashDragState.disposable.dispose();\n        this.saveProportions();\n        for (const item of this.viewItems) {\n            item.enabled = true;\n        }\n    }\n    onViewChange(item, size) {\n        const index = this.viewItems.indexOf(item);\n        if (index < 0 || index >= this.viewItems.length) {\n            return;\n        }\n        size = typeof size === 'number' ? size : item.size;\n        size = clamp(size, item.minimumSize, item.maximumSize);\n        if (this.inverseAltBehavior && index > 0) {\n            // In this case, we want the view to grow or shrink both sides equally\n            // so we just resize the \"left\" side by half and let `resize` do the clamping magic\n            this.resize(index - 1, Math.floor((item.size - size) / 2));\n            this.distributeEmptySpace();\n            this.layoutViews();\n        }\n        else {\n            item.size = size;\n            this.relayout([index], undefined);\n        }\n    }\n    /**\n     * Resize a {@link IView view} within the {@link SplitView}.\n     *\n     * @param index The {@link IView view} index.\n     * @param size The {@link IView view} size.\n     */\n    resizeView(index, size) {\n        if (this.state !== State.Idle) {\n            throw new Error('Cant modify splitview');\n        }\n        this.state = State.Busy;\n        if (index < 0 || index >= this.viewItems.length) {\n            return;\n        }\n        const indexes = range(this.viewItems.length).filter(i => i !== index);\n        const lowPriorityIndexes = [...indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */), index];\n        const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n        const item = this.viewItems[index];\n        size = Math.round(size);\n        size = clamp(size, item.minimumSize, Math.min(item.maximumSize, this.size));\n        item.size = size;\n        this.relayout(lowPriorityIndexes, highPriorityIndexes);\n        this.state = State.Idle;\n    }\n    /**\n     * Distribute the entire {@link SplitView} size among all {@link IView views}.\n     */\n    distributeViewSizes() {\n        const flexibleViewItems = [];\n        let flexibleSize = 0;\n        for (const item of this.viewItems) {\n            if (item.maximumSize - item.minimumSize > 0) {\n                flexibleViewItems.push(item);\n                flexibleSize += item.size;\n            }\n        }\n        const size = Math.floor(flexibleSize / flexibleViewItems.length);\n        for (const item of flexibleViewItems) {\n            item.size = clamp(size, item.minimumSize, item.maximumSize);\n        }\n        const indexes = range(this.viewItems.length);\n        const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n        const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n        this.relayout(lowPriorityIndexes, highPriorityIndexes);\n    }\n    /**\n     * Returns the size of a {@link IView view}.\n     */\n    getViewSize(index) {\n        if (index < 0 || index >= this.viewItems.length) {\n            return -1;\n        }\n        return this.viewItems[index].size;\n    }\n    doAddView(view, size, index = this.viewItems.length, skipLayout) {\n        if (this.state !== State.Idle) {\n            throw new Error('Cant modify splitview');\n        }\n        this.state = State.Busy;\n        // Add view\n        const container = $('.split-view-view');\n        if (index === this.viewItems.length) {\n            this.viewContainer.appendChild(container);\n        }\n        else {\n            this.viewContainer.insertBefore(container, this.viewContainer.children.item(index));\n        }\n        const onChangeDisposable = view.onDidChange(size => this.onViewChange(item, size));\n        const containerDisposable = toDisposable(() => this.viewContainer.removeChild(container));\n        const disposable = combinedDisposable(onChangeDisposable, containerDisposable);\n        let viewSize;\n        if (typeof size === 'number') {\n            viewSize = size;\n        }\n        else {\n            if (size.type === 'auto') {\n                if (this.areViewsDistributed()) {\n                    size = { type: 'distribute' };\n                }\n                else {\n                    size = { type: 'split', index: size.index };\n                }\n            }\n            if (size.type === 'split') {\n                viewSize = this.getViewSize(size.index) / 2;\n            }\n            else if (size.type === 'invisible') {\n                viewSize = { cachedVisibleSize: size.cachedVisibleSize };\n            }\n            else {\n                viewSize = view.minimumSize;\n            }\n        }\n        const item = this.orientation === 0 /* Orientation.VERTICAL */\n            ? new VerticalViewItem(container, view, viewSize, disposable)\n            : new HorizontalViewItem(container, view, viewSize, disposable);\n        this.viewItems.splice(index, 0, item);\n        // Add sash\n        if (this.viewItems.length > 1) {\n            const opts = { orthogonalStartSash: this.orthogonalStartSash, orthogonalEndSash: this.orthogonalEndSash };\n            const sash = this.orientation === 0 /* Orientation.VERTICAL */\n                ? new Sash(this.sashContainer, { getHorizontalSashTop: s => this.getSashPosition(s), getHorizontalSashWidth: this.getSashOrthogonalSize }, Object.assign(Object.assign({}, opts), { orientation: 1 /* Orientation.HORIZONTAL */ }))\n                : new Sash(this.sashContainer, { getVerticalSashLeft: s => this.getSashPosition(s), getVerticalSashHeight: this.getSashOrthogonalSize }, Object.assign(Object.assign({}, opts), { orientation: 0 /* Orientation.VERTICAL */ }));\n            const sashEventMapper = this.orientation === 0 /* Orientation.VERTICAL */\n                ? (e) => ({ sash, start: e.startY, current: e.currentY, alt: e.altKey })\n                : (e) => ({ sash, start: e.startX, current: e.currentX, alt: e.altKey });\n            const onStart = Event.map(sash.onDidStart, sashEventMapper);\n            const onStartDisposable = onStart(this.onSashStart, this);\n            const onChange = Event.map(sash.onDidChange, sashEventMapper);\n            const onChangeDisposable = onChange(this.onSashChange, this);\n            const onEnd = Event.map(sash.onDidEnd, () => this.sashItems.findIndex(item => item.sash === sash));\n            const onEndDisposable = onEnd(this.onSashEnd, this);\n            const onDidResetDisposable = sash.onDidReset(() => {\n                const index = this.sashItems.findIndex(item => item.sash === sash);\n                const upIndexes = range(index, -1);\n                const downIndexes = range(index + 1, this.viewItems.length);\n                const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n                const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n                if (typeof snapBeforeIndex === 'number' && !this.viewItems[snapBeforeIndex].visible) {\n                    return;\n                }\n                if (typeof snapAfterIndex === 'number' && !this.viewItems[snapAfterIndex].visible) {\n                    return;\n                }\n                this._onDidSashReset.fire(index);\n            });\n            const disposable = combinedDisposable(onStartDisposable, onChangeDisposable, onEndDisposable, onDidResetDisposable, sash);\n            const sashItem = { sash, disposable };\n            this.sashItems.splice(index - 1, 0, sashItem);\n        }\n        container.appendChild(view.element);\n        let highPriorityIndexes;\n        if (typeof size !== 'number' && size.type === 'split') {\n            highPriorityIndexes = [size.index];\n        }\n        if (!skipLayout) {\n            this.relayout([index], highPriorityIndexes);\n        }\n        this.state = State.Idle;\n        if (!skipLayout && typeof size !== 'number' && size.type === 'distribute') {\n            this.distributeViewSizes();\n        }\n    }\n    relayout(lowPriorityIndexes, highPriorityIndexes) {\n        const contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n        this.resize(this.viewItems.length - 1, this.size - contentSize, undefined, lowPriorityIndexes, highPriorityIndexes);\n        this.distributeEmptySpace();\n        this.layoutViews();\n        this.saveProportions();\n    }\n    resize(index, delta, sizes = this.viewItems.map(i => i.size), lowPriorityIndexes, highPriorityIndexes, overloadMinDelta = Number.NEGATIVE_INFINITY, overloadMaxDelta = Number.POSITIVE_INFINITY, snapBefore, snapAfter) {\n        if (index < 0 || index >= this.viewItems.length) {\n            return 0;\n        }\n        const upIndexes = range(index, -1);\n        const downIndexes = range(index + 1, this.viewItems.length);\n        if (highPriorityIndexes) {\n            for (const index of highPriorityIndexes) {\n                pushToStart(upIndexes, index);\n                pushToStart(downIndexes, index);\n            }\n        }\n        if (lowPriorityIndexes) {\n            for (const index of lowPriorityIndexes) {\n                pushToEnd(upIndexes, index);\n                pushToEnd(downIndexes, index);\n            }\n        }\n        const upItems = upIndexes.map(i => this.viewItems[i]);\n        const upSizes = upIndexes.map(i => sizes[i]);\n        const downItems = downIndexes.map(i => this.viewItems[i]);\n        const downSizes = downIndexes.map(i => sizes[i]);\n        const minDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].minimumSize - sizes[i]), 0);\n        const maxDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].maximumSize - sizes[i]), 0);\n        const maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].minimumSize), 0);\n        const minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].maximumSize), 0);\n        const minDelta = Math.max(minDeltaUp, minDeltaDown, overloadMinDelta);\n        const maxDelta = Math.min(maxDeltaDown, maxDeltaUp, overloadMaxDelta);\n        let snapped = false;\n        if (snapBefore) {\n            const snapView = this.viewItems[snapBefore.index];\n            const visible = delta >= snapBefore.limitDelta;\n            snapped = visible !== snapView.visible;\n            snapView.setVisible(visible, snapBefore.size);\n        }\n        if (!snapped && snapAfter) {\n            const snapView = this.viewItems[snapAfter.index];\n            const visible = delta < snapAfter.limitDelta;\n            snapped = visible !== snapView.visible;\n            snapView.setVisible(visible, snapAfter.size);\n        }\n        if (snapped) {\n            return this.resize(index, delta, sizes, lowPriorityIndexes, highPriorityIndexes, overloadMinDelta, overloadMaxDelta);\n        }\n        delta = clamp(delta, minDelta, maxDelta);\n        for (let i = 0, deltaUp = delta; i < upItems.length; i++) {\n            const item = upItems[i];\n            const size = clamp(upSizes[i] + deltaUp, item.minimumSize, item.maximumSize);\n            const viewDelta = size - upSizes[i];\n            deltaUp -= viewDelta;\n            item.size = size;\n        }\n        for (let i = 0, deltaDown = delta; i < downItems.length; i++) {\n            const item = downItems[i];\n            const size = clamp(downSizes[i] - deltaDown, item.minimumSize, item.maximumSize);\n            const viewDelta = size - downSizes[i];\n            deltaDown += viewDelta;\n            item.size = size;\n        }\n        return delta;\n    }\n    distributeEmptySpace(lowPriorityIndex) {\n        const contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n        let emptyDelta = this.size - contentSize;\n        const indexes = range(this.viewItems.length - 1, -1);\n        const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n        const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n        for (const index of highPriorityIndexes) {\n            pushToStart(indexes, index);\n        }\n        for (const index of lowPriorityIndexes) {\n            pushToEnd(indexes, index);\n        }\n        if (typeof lowPriorityIndex === 'number') {\n            pushToEnd(indexes, lowPriorityIndex);\n        }\n        for (let i = 0; emptyDelta !== 0 && i < indexes.length; i++) {\n            const item = this.viewItems[indexes[i]];\n            const size = clamp(item.size + emptyDelta, item.minimumSize, item.maximumSize);\n            const viewDelta = size - item.size;\n            emptyDelta -= viewDelta;\n            item.size = size;\n        }\n    }\n    layoutViews() {\n        // Save new content size\n        this.contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n        // Layout views\n        let offset = 0;\n        for (const viewItem of this.viewItems) {\n            viewItem.layout(offset, this.layoutContext);\n            offset += viewItem.size;\n        }\n        // Layout sashes\n        this.sashItems.forEach(item => item.sash.layout());\n        this.updateSashEnablement();\n        this.updateScrollableElement();\n    }\n    updateScrollableElement() {\n        if (this.orientation === 0 /* Orientation.VERTICAL */) {\n            this.scrollableElement.setScrollDimensions({\n                height: this.size,\n                scrollHeight: this.contentSize\n            });\n        }\n        else {\n            this.scrollableElement.setScrollDimensions({\n                width: this.size,\n                scrollWidth: this.contentSize\n            });\n        }\n    }\n    updateSashEnablement() {\n        let previous = false;\n        const collapsesDown = this.viewItems.map(i => previous = (i.size - i.minimumSize > 0) || previous);\n        previous = false;\n        const expandsDown = this.viewItems.map(i => previous = (i.maximumSize - i.size > 0) || previous);\n        const reverseViews = [...this.viewItems].reverse();\n        previous = false;\n        const collapsesUp = reverseViews.map(i => previous = (i.size - i.minimumSize > 0) || previous).reverse();\n        previous = false;\n        const expandsUp = reverseViews.map(i => previous = (i.maximumSize - i.size > 0) || previous).reverse();\n        let position = 0;\n        for (let index = 0; index < this.sashItems.length; index++) {\n            const { sash } = this.sashItems[index];\n            const viewItem = this.viewItems[index];\n            position += viewItem.size;\n            const min = !(collapsesDown[index] && expandsUp[index + 1]);\n            const max = !(expandsDown[index] && collapsesUp[index + 1]);\n            if (min && max) {\n                const upIndexes = range(index, -1);\n                const downIndexes = range(index + 1, this.viewItems.length);\n                const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n                const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n                const snappedBefore = typeof snapBeforeIndex === 'number' && !this.viewItems[snapBeforeIndex].visible;\n                const snappedAfter = typeof snapAfterIndex === 'number' && !this.viewItems[snapAfterIndex].visible;\n                if (snappedBefore && collapsesUp[index] && (position > 0 || this.startSnappingEnabled)) {\n                    sash.state = 1 /* SashState.AtMinimum */;\n                }\n                else if (snappedAfter && collapsesDown[index] && (position < this.contentSize || this.endSnappingEnabled)) {\n                    sash.state = 2 /* SashState.AtMaximum */;\n                }\n                else {\n                    sash.state = 0 /* SashState.Disabled */;\n                }\n            }\n            else if (min && !max) {\n                sash.state = 1 /* SashState.AtMinimum */;\n            }\n            else if (!min && max) {\n                sash.state = 2 /* SashState.AtMaximum */;\n            }\n            else {\n                sash.state = 3 /* SashState.Enabled */;\n            }\n        }\n    }\n    getSashPosition(sash) {\n        let position = 0;\n        for (let i = 0; i < this.sashItems.length; i++) {\n            position += this.viewItems[i].size;\n            if (this.sashItems[i].sash === sash) {\n                return position;\n            }\n        }\n        return 0;\n    }\n    findFirstSnapIndex(indexes) {\n        // visible views first\n        for (const index of indexes) {\n            const viewItem = this.viewItems[index];\n            if (!viewItem.visible) {\n                continue;\n            }\n            if (viewItem.snap) {\n                return index;\n            }\n        }\n        // then, hidden views\n        for (const index of indexes) {\n            const viewItem = this.viewItems[index];\n            if (viewItem.visible && viewItem.maximumSize - viewItem.minimumSize > 0) {\n                return undefined;\n            }\n            if (!viewItem.visible && viewItem.snap) {\n                return index;\n            }\n        }\n        return undefined;\n    }\n    areViewsDistributed() {\n        let min = undefined, max = undefined;\n        for (const view of this.viewItems) {\n            min = min === undefined ? view.size : Math.min(min, view.size);\n            max = max === undefined ? view.size : Math.max(max, view.size);\n            if (max - min > 2) {\n                return false;\n            }\n        }\n        return true;\n    }\n    dispose() {\n        var _a;\n        (_a = this.sashDragState) === null || _a === void 0 ? void 0 : _a.disposable.dispose();\n        dispose(this.viewItems);\n        this.viewItems = [];\n        this.sashItems.forEach(i => i.disposable.dispose());\n        this.sashItems = [];\n        super.dispose();\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}