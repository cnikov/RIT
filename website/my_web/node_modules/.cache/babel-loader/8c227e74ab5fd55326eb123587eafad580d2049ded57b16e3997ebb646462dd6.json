{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nimport * as dom from '../../../base/browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\nimport { ActionBar } from '../../../base/browser/ui/actionbar/actionbar.js';\nimport { IconLabel } from '../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { KeybindingLabel } from '../../../base/browser/ui/keybindingLabel/keybindingLabel.js';\nimport { range } from '../../../base/common/arrays.js';\nimport { ThrottledDelayer } from '../../../base/common/async.js';\nimport { compareAnything } from '../../../base/common/comparers.js';\nimport { memoize } from '../../../base/common/decorators.js';\nimport { isCancellationError } from '../../../base/common/errors.js';\nimport { Emitter, Event } from '../../../base/common/event.js';\nimport { getCodiconAriaLabel, matchesFuzzyIconAware, parseLabelWithIcons } from '../../../base/common/iconLabels.js';\nimport { DisposableStore, dispose } from '../../../base/common/lifecycle.js';\nimport * as platform from '../../../base/common/platform.js';\nimport { ltrim } from '../../../base/common/strings.js';\nimport './media/quickInput.css';\nimport { localize } from '../../../nls.js';\nimport { getIconClass } from './quickInputUtils.js';\nimport { Lazy } from '../../../base/common/lazy.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { isDark } from '../../theme/common/theme.js';\nconst $ = dom.$;\nclass ListElement {\n  constructor(mainItem, previous, index, hasCheckbox, fireButtonTriggered, fireSeparatorButtonTriggered, onCheckedEmitter) {\n    var _a, _b, _c;\n    // state will get updated later\n    this._checked = false;\n    this._hidden = false;\n    this.hasCheckbox = hasCheckbox;\n    this.index = index;\n    this.fireButtonTriggered = fireButtonTriggered;\n    this.fireSeparatorButtonTriggered = fireSeparatorButtonTriggered;\n    this._onChecked = onCheckedEmitter;\n    this.onChecked = hasCheckbox ? Event.map(Event.filter(this._onChecked.event, e => e.listElement === this), e => e.checked) : Event.None;\n    if (mainItem.type === 'separator') {\n      this._separator = mainItem;\n    } else {\n      this.item = mainItem;\n      if (previous && previous.type === 'separator' && !previous.buttons) {\n        this._separator = previous;\n      }\n      this.saneDescription = this.item.description;\n      this.saneDetail = this.item.detail;\n      this._labelHighlights = (_a = this.item.highlights) === null || _a === void 0 ? void 0 : _a.label;\n      this._descriptionHighlights = (_b = this.item.highlights) === null || _b === void 0 ? void 0 : _b.description;\n      this._detailHighlights = (_c = this.item.highlights) === null || _c === void 0 ? void 0 : _c.detail;\n      this.saneTooltip = this.item.tooltip;\n    }\n    this._init = new Lazy(() => {\n      var _a;\n      const saneLabel = (_a = mainItem.label) !== null && _a !== void 0 ? _a : '';\n      const saneSortLabel = parseLabelWithIcons(saneLabel).text.trim();\n      const saneAriaLabel = mainItem.ariaLabel || [saneLabel, this.saneDescription, this.saneDetail].map(s => getCodiconAriaLabel(s)).filter(s => !!s).join(', ');\n      return {\n        saneLabel,\n        saneSortLabel,\n        saneAriaLabel\n      };\n    });\n  }\n  // #region Lazy Getters\n  get saneLabel() {\n    return this._init.value.saneLabel;\n  }\n  get saneSortLabel() {\n    return this._init.value.saneSortLabel;\n  }\n  get saneAriaLabel() {\n    return this._init.value.saneAriaLabel;\n  }\n  // #endregion\n  // #region Getters and Setters\n  get element() {\n    return this._element;\n  }\n  set element(value) {\n    this._element = value;\n  }\n  get hidden() {\n    return this._hidden;\n  }\n  set hidden(value) {\n    this._hidden = value;\n  }\n  get checked() {\n    return this._checked;\n  }\n  set checked(value) {\n    if (value !== this._checked) {\n      this._checked = value;\n      this._onChecked.fire({\n        listElement: this,\n        checked: value\n      });\n    }\n  }\n  get separator() {\n    return this._separator;\n  }\n  set separator(value) {\n    this._separator = value;\n  }\n  get labelHighlights() {\n    return this._labelHighlights;\n  }\n  set labelHighlights(value) {\n    this._labelHighlights = value;\n  }\n  get descriptionHighlights() {\n    return this._descriptionHighlights;\n  }\n  set descriptionHighlights(value) {\n    this._descriptionHighlights = value;\n  }\n  get detailHighlights() {\n    return this._detailHighlights;\n  }\n  set detailHighlights(value) {\n    this._detailHighlights = value;\n  }\n}\nclass ListElementRenderer {\n  constructor(themeService) {\n    this.themeService = themeService;\n  }\n  get templateId() {\n    return ListElementRenderer.ID;\n  }\n  renderTemplate(container) {\n    const data = Object.create(null);\n    data.toDisposeElement = [];\n    data.toDisposeTemplate = [];\n    data.entry = dom.append(container, $('.quick-input-list-entry'));\n    // Checkbox\n    const label = dom.append(data.entry, $('label.quick-input-list-label'));\n    data.toDisposeTemplate.push(dom.addStandardDisposableListener(label, dom.EventType.CLICK, e => {\n      if (!data.checkbox.offsetParent) {\n        // If checkbox not visible:\n        e.preventDefault(); // Prevent toggle of checkbox when it is immediately shown afterwards. #91740\n      }\n    }));\n\n    data.checkbox = dom.append(label, $('input.quick-input-list-checkbox'));\n    data.checkbox.type = 'checkbox';\n    data.toDisposeTemplate.push(dom.addStandardDisposableListener(data.checkbox, dom.EventType.CHANGE, e => {\n      data.element.checked = data.checkbox.checked;\n    }));\n    // Rows\n    const rows = dom.append(label, $('.quick-input-list-rows'));\n    const row1 = dom.append(rows, $('.quick-input-list-row'));\n    const row2 = dom.append(rows, $('.quick-input-list-row'));\n    // Label\n    data.label = new IconLabel(row1, {\n      supportHighlights: true,\n      supportDescriptionHighlights: true,\n      supportIcons: true\n    });\n    data.toDisposeTemplate.push(data.label);\n    data.icon = dom.prepend(data.label.element, $('.quick-input-list-icon'));\n    // Keybinding\n    const keybindingContainer = dom.append(row1, $('.quick-input-list-entry-keybinding'));\n    data.keybinding = new KeybindingLabel(keybindingContainer, platform.OS);\n    // Detail\n    const detailContainer = dom.append(row2, $('.quick-input-list-label-meta'));\n    data.detail = new IconLabel(detailContainer, {\n      supportHighlights: true,\n      supportIcons: true\n    });\n    data.toDisposeTemplate.push(data.detail);\n    // Separator\n    data.separator = dom.append(data.entry, $('.quick-input-list-separator'));\n    // Actions\n    data.actionBar = new ActionBar(data.entry);\n    data.actionBar.domNode.classList.add('quick-input-list-entry-action-bar');\n    data.toDisposeTemplate.push(data.actionBar);\n    return data;\n  }\n  renderElement(element, index, data) {\n    var _a, _b, _c, _d;\n    data.element = element;\n    element.element = (_a = data.entry) !== null && _a !== void 0 ? _a : undefined;\n    const mainItem = element.item ? element.item : element.separator;\n    data.checkbox.checked = element.checked;\n    data.toDisposeElement.push(element.onChecked(checked => data.checkbox.checked = checked));\n    const {\n      labelHighlights,\n      descriptionHighlights,\n      detailHighlights\n    } = element;\n    if ((_b = element.item) === null || _b === void 0 ? void 0 : _b.iconPath) {\n      const icon = isDark(this.themeService.getColorTheme().type) ? element.item.iconPath.dark : (_c = element.item.iconPath.light) !== null && _c !== void 0 ? _c : element.item.iconPath.dark;\n      const iconUrl = URI.revive(icon);\n      data.icon.className = 'quick-input-list-icon';\n      data.icon.style.backgroundImage = dom.asCSSUrl(iconUrl);\n    } else {\n      data.icon.style.backgroundImage = '';\n      data.icon.className = ((_d = element.item) === null || _d === void 0 ? void 0 : _d.iconClass) ? `quick-input-list-icon ${element.item.iconClass}` : '';\n    }\n    // Label\n    const options = {\n      matches: labelHighlights || [],\n      descriptionTitle: element.saneDescription,\n      descriptionMatches: descriptionHighlights || [],\n      labelEscapeNewLines: true\n    };\n    if (mainItem.type !== 'separator') {\n      options.extraClasses = mainItem.iconClasses;\n      options.italic = mainItem.italic;\n      options.strikethrough = mainItem.strikethrough;\n      data.entry.classList.remove('quick-input-list-separator-as-item');\n    } else {\n      data.entry.classList.add('quick-input-list-separator-as-item');\n    }\n    data.label.setLabel(element.saneLabel, element.saneDescription, options);\n    // Keybinding\n    data.keybinding.set(mainItem.type === 'separator' ? undefined : mainItem.keybinding);\n    // Detail\n    if (element.saneDetail) {\n      data.detail.element.style.display = '';\n      data.detail.setLabel(element.saneDetail, undefined, {\n        matches: detailHighlights,\n        title: element.saneDetail,\n        labelEscapeNewLines: true\n      });\n    } else {\n      data.detail.element.style.display = 'none';\n    }\n    // Separator\n    if (element.item && element.separator && element.separator.label) {\n      data.separator.textContent = element.separator.label;\n      data.separator.style.display = '';\n    } else {\n      data.separator.style.display = 'none';\n    }\n    data.entry.classList.toggle('quick-input-list-separator-border', !!element.separator);\n    // Actions\n    const buttons = mainItem.buttons;\n    if (buttons && buttons.length) {\n      data.actionBar.push(buttons.map((button, index) => {\n        let cssClasses = button.iconClass || (button.iconPath ? getIconClass(button.iconPath) : undefined);\n        if (button.alwaysVisible) {\n          cssClasses = cssClasses ? `${cssClasses} always-visible` : 'always-visible';\n        }\n        return {\n          id: `id-${index}`,\n          class: cssClasses,\n          enabled: true,\n          label: '',\n          tooltip: button.tooltip || '',\n          run: () => {\n            mainItem.type !== 'separator' ? element.fireButtonTriggered({\n              button,\n              item: mainItem\n            }) : element.fireSeparatorButtonTriggered({\n              button,\n              separator: mainItem\n            });\n          }\n        };\n      }), {\n        icon: true,\n        label: false\n      });\n      data.entry.classList.add('has-actions');\n    } else {\n      data.entry.classList.remove('has-actions');\n    }\n  }\n  disposeElement(element, index, data) {\n    data.toDisposeElement = dispose(data.toDisposeElement);\n    data.actionBar.clear();\n  }\n  disposeTemplate(data) {\n    data.toDisposeElement = dispose(data.toDisposeElement);\n    data.toDisposeTemplate = dispose(data.toDisposeTemplate);\n  }\n}\nListElementRenderer.ID = 'listelement';\nclass ListElementDelegate {\n  getHeight(element) {\n    if (!element.item) {\n      // must be a separator\n      return 24;\n    }\n    return element.saneDetail ? 44 : 22;\n  }\n  getTemplateId(element) {\n    return ListElementRenderer.ID;\n  }\n}\nexport var QuickInputListFocus;\n(function (QuickInputListFocus) {\n  QuickInputListFocus[QuickInputListFocus[\"First\"] = 1] = \"First\";\n  QuickInputListFocus[QuickInputListFocus[\"Second\"] = 2] = \"Second\";\n  QuickInputListFocus[QuickInputListFocus[\"Last\"] = 3] = \"Last\";\n  QuickInputListFocus[QuickInputListFocus[\"Next\"] = 4] = \"Next\";\n  QuickInputListFocus[QuickInputListFocus[\"Previous\"] = 5] = \"Previous\";\n  QuickInputListFocus[QuickInputListFocus[\"NextPage\"] = 6] = \"NextPage\";\n  QuickInputListFocus[QuickInputListFocus[\"PreviousPage\"] = 7] = \"PreviousPage\";\n})(QuickInputListFocus || (QuickInputListFocus = {}));\nexport class QuickInputList {\n  constructor(parent, id, options, themeService) {\n    this.parent = parent;\n    this.options = options;\n    this.inputElements = [];\n    this.elements = [];\n    this.elementsToIndexes = new Map();\n    this.matchOnDescription = false;\n    this.matchOnDetail = false;\n    this.matchOnLabel = true;\n    this.matchOnLabelMode = 'fuzzy';\n    this.sortByLabel = true;\n    this._onChangedAllVisibleChecked = new Emitter();\n    this.onChangedAllVisibleChecked = this._onChangedAllVisibleChecked.event;\n    this._onChangedCheckedCount = new Emitter();\n    this.onChangedCheckedCount = this._onChangedCheckedCount.event;\n    this._onChangedVisibleCount = new Emitter();\n    this.onChangedVisibleCount = this._onChangedVisibleCount.event;\n    this._onChangedCheckedElements = new Emitter();\n    this.onChangedCheckedElements = this._onChangedCheckedElements.event;\n    this._onButtonTriggered = new Emitter();\n    this.onButtonTriggered = this._onButtonTriggered.event;\n    this._onSeparatorButtonTriggered = new Emitter();\n    this.onSeparatorButtonTriggered = this._onSeparatorButtonTriggered.event;\n    this._onKeyDown = new Emitter();\n    this.onKeyDown = this._onKeyDown.event;\n    this._onLeave = new Emitter();\n    this.onLeave = this._onLeave.event;\n    this._listElementChecked = new Emitter();\n    this._fireCheckedEvents = true;\n    this.elementDisposables = [];\n    this.disposables = [];\n    this.id = id;\n    this.container = dom.append(this.parent, $('.quick-input-list'));\n    const delegate = new ListElementDelegate();\n    const accessibilityProvider = new QuickInputAccessibilityProvider();\n    this.list = options.createList('QuickInput', this.container, delegate, [new ListElementRenderer(themeService)], {\n      identityProvider: {\n        getId: element => {\n          var _a, _b, _c, _d, _e, _f, _g, _h;\n          // always prefer item over separator because if item is defined, it must be the main item type\n          // always prefer a defined id if one was specified and use label as a fallback\n          return (_h = (_f = (_d = (_b = (_a = element.item) === null || _a === void 0 ? void 0 : _a.id) !== null && _b !== void 0 ? _b : (_c = element.item) === null || _c === void 0 ? void 0 : _c.label) !== null && _d !== void 0 ? _d : (_e = element.separator) === null || _e === void 0 ? void 0 : _e.id) !== null && _f !== void 0 ? _f : (_g = element.separator) === null || _g === void 0 ? void 0 : _g.label) !== null && _h !== void 0 ? _h : '';\n        }\n      },\n      setRowLineHeight: false,\n      multipleSelectionSupport: false,\n      horizontalScrolling: false,\n      accessibilityProvider\n    });\n    this.list.getHTMLElement().id = id;\n    this.disposables.push(this.list);\n    this.disposables.push(this.list.onKeyDown(e => {\n      const event = new StandardKeyboardEvent(e);\n      switch (event.keyCode) {\n        case 10 /* KeyCode.Space */:\n          this.toggleCheckbox();\n          break;\n        case 31 /* KeyCode.KeyA */:\n          if (platform.isMacintosh ? e.metaKey : e.ctrlKey) {\n            this.list.setFocus(range(this.list.length));\n          }\n          break;\n        case 16 /* KeyCode.UpArrow */:\n          {\n            const focus1 = this.list.getFocus();\n            if (focus1.length === 1 && focus1[0] === 0) {\n              this._onLeave.fire();\n            }\n            break;\n          }\n        case 18 /* KeyCode.DownArrow */:\n          {\n            const focus2 = this.list.getFocus();\n            if (focus2.length === 1 && focus2[0] === this.list.length - 1) {\n              this._onLeave.fire();\n            }\n            break;\n          }\n      }\n      this._onKeyDown.fire(event);\n    }));\n    this.disposables.push(this.list.onMouseDown(e => {\n      if (e.browserEvent.button !== 2) {\n        // Works around / fixes #64350.\n        e.browserEvent.preventDefault();\n      }\n    }));\n    this.disposables.push(dom.addDisposableListener(this.container, dom.EventType.CLICK, e => {\n      if (e.x || e.y) {\n        // Avoid 'click' triggered by 'space' on checkbox.\n        this._onLeave.fire();\n      }\n    }));\n    this.disposables.push(this.list.onMouseMiddleClick(e => {\n      this._onLeave.fire();\n    }));\n    this.disposables.push(this.list.onContextMenu(e => {\n      if (typeof e.index === 'number') {\n        e.browserEvent.preventDefault();\n        // we want to treat a context menu event as\n        // a gesture to open the item at the index\n        // since we do not have any context menu\n        // this enables for example macOS to Ctrl-\n        // click on an item to open it.\n        this.list.setSelection([e.index]);\n      }\n    }));\n    if (options.hoverDelegate) {\n      const delayer = new ThrottledDelayer(options.hoverDelegate.delay);\n      // onMouseOver triggers every time a new element has been moused over\n      // even if it's on the same list item.\n      this.disposables.push(this.list.onMouseOver(e => __awaiter(this, void 0, void 0, function* () {\n        var _a;\n        // If we hover over an anchor element, we don't want to show the hover because\n        // the anchor may have a tooltip that we want to show instead.\n        if (e.browserEvent.target instanceof HTMLAnchorElement) {\n          delayer.cancel();\n          return;\n        }\n        if (\n        // anchors are an exception as called out above so we skip them here\n        !(e.browserEvent.relatedTarget instanceof HTMLAnchorElement) &&\n        // check if the mouse is still over the same element\n        dom.isAncestor(e.browserEvent.relatedTarget, (_a = e.element) === null || _a === void 0 ? void 0 : _a.element)) {\n          return;\n        }\n        try {\n          yield delayer.trigger(() => __awaiter(this, void 0, void 0, function* () {\n            if (e.element) {\n              this.showHover(e.element);\n            }\n          }));\n        } catch (e) {\n          // Ignore cancellation errors due to mouse out\n          if (!isCancellationError(e)) {\n            throw e;\n          }\n        }\n      })));\n      this.disposables.push(this.list.onMouseOut(e => {\n        var _a;\n        // onMouseOut triggers every time a new element has been moused over\n        // even if it's on the same list item. We only want one event, so we\n        // check if the mouse is still over the same element.\n        if (dom.isAncestor(e.browserEvent.relatedTarget, (_a = e.element) === null || _a === void 0 ? void 0 : _a.element)) {\n          return;\n        }\n        delayer.cancel();\n      }));\n      this.disposables.push(delayer);\n    }\n    this.disposables.push(this._listElementChecked.event(_ => this.fireCheckedEvents()));\n    this.disposables.push(this._onChangedAllVisibleChecked, this._onChangedCheckedCount, this._onChangedVisibleCount, this._onChangedCheckedElements, this._onButtonTriggered, this._onSeparatorButtonTriggered, this._onLeave, this._onKeyDown);\n  }\n  get onDidChangeFocus() {\n    return Event.map(this.list.onDidChangeFocus, e => e.elements.map(e => e.item));\n  }\n  get onDidChangeSelection() {\n    return Event.map(this.list.onDidChangeSelection, e => ({\n      items: e.elements.map(e => e.item),\n      event: e.browserEvent\n    }));\n  }\n  get scrollTop() {\n    return this.list.scrollTop;\n  }\n  set scrollTop(scrollTop) {\n    this.list.scrollTop = scrollTop;\n  }\n  get ariaLabel() {\n    return this.list.getHTMLElement().ariaLabel;\n  }\n  set ariaLabel(label) {\n    this.list.getHTMLElement().ariaLabel = label;\n  }\n  getAllVisibleChecked() {\n    return this.allVisibleChecked(this.elements, false);\n  }\n  allVisibleChecked(elements, whenNoneVisible = true) {\n    for (let i = 0, n = elements.length; i < n; i++) {\n      const element = elements[i];\n      if (!element.hidden) {\n        if (!element.checked) {\n          return false;\n        } else {\n          whenNoneVisible = true;\n        }\n      }\n    }\n    return whenNoneVisible;\n  }\n  getCheckedCount() {\n    let count = 0;\n    const elements = this.elements;\n    for (let i = 0, n = elements.length; i < n; i++) {\n      if (elements[i].checked) {\n        count++;\n      }\n    }\n    return count;\n  }\n  getVisibleCount() {\n    let count = 0;\n    const elements = this.elements;\n    for (let i = 0, n = elements.length; i < n; i++) {\n      if (!elements[i].hidden) {\n        count++;\n      }\n    }\n    return count;\n  }\n  setAllVisibleChecked(checked) {\n    try {\n      this._fireCheckedEvents = false;\n      this.elements.forEach(element => {\n        if (!element.hidden) {\n          element.checked = checked;\n        }\n      });\n    } finally {\n      this._fireCheckedEvents = true;\n      this.fireCheckedEvents();\n    }\n  }\n  setElements(inputElements) {\n    this.elementDisposables = dispose(this.elementDisposables);\n    const fireButtonTriggered = event => this.fireButtonTriggered(event);\n    const fireSeparatorButtonTriggered = event => this.fireSeparatorButtonTriggered(event);\n    this.inputElements = inputElements;\n    const elementsToIndexes = new Map();\n    const hasCheckbox = this.parent.classList.contains('show-checkboxes');\n    this.elements = inputElements.reduce((result, item, index) => {\n      var _a;\n      const previous = index > 0 ? inputElements[index - 1] : undefined;\n      if (item.type === 'separator') {\n        if (!item.buttons) {\n          // This separator will be rendered as a part of the list item\n          return result;\n        }\n      }\n      const element = new ListElement(item, previous, index, hasCheckbox, fireButtonTriggered, fireSeparatorButtonTriggered, this._listElementChecked);\n      const resultIndex = result.length;\n      result.push(element);\n      elementsToIndexes.set((_a = element.item) !== null && _a !== void 0 ? _a : element.separator, resultIndex);\n      return result;\n    }, []);\n    this.elementsToIndexes = elementsToIndexes;\n    this.list.splice(0, this.list.length); // Clear focus and selection first, sending the events when the list is empty.\n    this.list.splice(0, this.list.length, this.elements);\n    this._onChangedVisibleCount.fire(this.elements.length);\n  }\n  getFocusedElements() {\n    return this.list.getFocusedElements().map(e => e.item);\n  }\n  setFocusedElements(items) {\n    this.list.setFocus(items.filter(item => this.elementsToIndexes.has(item)).map(item => this.elementsToIndexes.get(item)));\n    if (items.length > 0) {\n      const focused = this.list.getFocus()[0];\n      if (typeof focused === 'number') {\n        this.list.reveal(focused);\n      }\n    }\n  }\n  getActiveDescendant() {\n    return this.list.getHTMLElement().getAttribute('aria-activedescendant');\n  }\n  setSelectedElements(items) {\n    this.list.setSelection(items.filter(item => this.elementsToIndexes.has(item)).map(item => this.elementsToIndexes.get(item)));\n  }\n  getCheckedElements() {\n    return this.elements.filter(e => e.checked).map(e => e.item).filter(e => !!e);\n  }\n  setCheckedElements(items) {\n    try {\n      this._fireCheckedEvents = false;\n      const checked = new Set();\n      for (const item of items) {\n        checked.add(item);\n      }\n      for (const element of this.elements) {\n        element.checked = checked.has(element.item);\n      }\n    } finally {\n      this._fireCheckedEvents = true;\n      this.fireCheckedEvents();\n    }\n  }\n  set enabled(value) {\n    this.list.getHTMLElement().style.pointerEvents = value ? '' : 'none';\n  }\n  focus(what) {\n    if (!this.list.length) {\n      return;\n    }\n    if (what === QuickInputListFocus.Second && this.list.length < 2) {\n      what = QuickInputListFocus.First;\n    }\n    switch (what) {\n      case QuickInputListFocus.First:\n        this.list.scrollTop = 0;\n        this.list.focusFirst(undefined, e => !!e.item);\n        break;\n      case QuickInputListFocus.Second:\n        this.list.scrollTop = 0;\n        this.list.focusNth(1, undefined, e => !!e.item);\n        break;\n      case QuickInputListFocus.Last:\n        this.list.scrollTop = this.list.scrollHeight;\n        this.list.focusLast(undefined, e => !!e.item);\n        break;\n      case QuickInputListFocus.Next:\n        {\n          this.list.focusNext(undefined, true, undefined, e => !!e.item);\n          const index = this.list.getFocus()[0];\n          if (index !== 0 && !this.elements[index - 1].item && this.list.firstVisibleIndex > index - 1) {\n            this.list.reveal(index - 1);\n          }\n          break;\n        }\n      case QuickInputListFocus.Previous:\n        {\n          this.list.focusPrevious(undefined, true, undefined, e => !!e.item);\n          const index = this.list.getFocus()[0];\n          if (index !== 0 && !this.elements[index - 1].item && this.list.firstVisibleIndex > index - 1) {\n            this.list.reveal(index - 1);\n          }\n          break;\n        }\n      case QuickInputListFocus.NextPage:\n        this.list.focusNextPage(undefined, e => !!e.item);\n        break;\n      case QuickInputListFocus.PreviousPage:\n        this.list.focusPreviousPage(undefined, e => !!e.item);\n        break;\n    }\n    const focused = this.list.getFocus()[0];\n    if (typeof focused === 'number') {\n      this.list.reveal(focused);\n    }\n  }\n  clearFocus() {\n    this.list.setFocus([]);\n  }\n  domFocus() {\n    this.list.domFocus();\n  }\n  /**\n   * Disposes of the hover and shows a new one for the given index if it has a tooltip.\n   * @param element The element to show the hover for\n   */\n  showHover(element) {\n    var _a, _b, _c;\n    if (this.options.hoverDelegate === undefined) {\n      return;\n    }\n    if (this._lastHover && !this._lastHover.isDisposed) {\n      (_b = (_a = this.options.hoverDelegate).onDidHideHover) === null || _b === void 0 ? void 0 : _b.call(_a);\n      (_c = this._lastHover) === null || _c === void 0 ? void 0 : _c.dispose();\n    }\n    if (!element.element || !element.saneTooltip) {\n      return;\n    }\n    this._lastHover = this.options.hoverDelegate.showHover({\n      content: element.saneTooltip,\n      target: element.element,\n      linkHandler: url => {\n        this.options.linkOpenerDelegate(url);\n      },\n      showPointer: true,\n      container: this.container,\n      hoverPosition: 1 /* HoverPosition.RIGHT */\n    }, false);\n  }\n  layout(maxHeight) {\n    this.list.getHTMLElement().style.maxHeight = maxHeight ? `${\n    // Make sure height aligns with list item heights\n    Math.floor(maxHeight / 44) * 44\n    // Add some extra height so that it's clear there's more to scroll\n    + 6}px` : '';\n    this.list.layout();\n  }\n  filter(query) {\n    if (!(this.sortByLabel || this.matchOnLabel || this.matchOnDescription || this.matchOnDetail)) {\n      this.list.layout();\n      return false;\n    }\n    const queryWithWhitespace = query;\n    query = query.trim();\n    // Reset filtering\n    if (!query || !(this.matchOnLabel || this.matchOnDescription || this.matchOnDetail)) {\n      this.elements.forEach(element => {\n        element.labelHighlights = undefined;\n        element.descriptionHighlights = undefined;\n        element.detailHighlights = undefined;\n        element.hidden = false;\n        const previous = element.index && this.inputElements[element.index - 1];\n        if (element.item) {\n          element.separator = previous && previous.type === 'separator' && !previous.buttons ? previous : undefined;\n        }\n      });\n    }\n    // Filter by value (since we support icons in labels, use $(..) aware fuzzy matching)\n    else {\n      let currentSeparator;\n      this.elements.forEach(element => {\n        var _a, _b, _c, _d;\n        let labelHighlights;\n        if (this.matchOnLabelMode === 'fuzzy') {\n          labelHighlights = this.matchOnLabel ? (_a = matchesFuzzyIconAware(query, parseLabelWithIcons(element.saneLabel))) !== null && _a !== void 0 ? _a : undefined : undefined;\n        } else {\n          labelHighlights = this.matchOnLabel ? (_b = matchesContiguousIconAware(queryWithWhitespace, parseLabelWithIcons(element.saneLabel))) !== null && _b !== void 0 ? _b : undefined : undefined;\n        }\n        const descriptionHighlights = this.matchOnDescription ? (_c = matchesFuzzyIconAware(query, parseLabelWithIcons(element.saneDescription || ''))) !== null && _c !== void 0 ? _c : undefined : undefined;\n        const detailHighlights = this.matchOnDetail ? (_d = matchesFuzzyIconAware(query, parseLabelWithIcons(element.saneDetail || ''))) !== null && _d !== void 0 ? _d : undefined : undefined;\n        if (labelHighlights || descriptionHighlights || detailHighlights) {\n          element.labelHighlights = labelHighlights;\n          element.descriptionHighlights = descriptionHighlights;\n          element.detailHighlights = detailHighlights;\n          element.hidden = false;\n        } else {\n          element.labelHighlights = undefined;\n          element.descriptionHighlights = undefined;\n          element.detailHighlights = undefined;\n          element.hidden = element.item ? !element.item.alwaysShow : true;\n        }\n        // Ensure separators are filtered out first before deciding if we need to bring them back\n        if (element.item) {\n          element.separator = undefined;\n        } else if (element.separator) {\n          element.hidden = true;\n        }\n        // we can show the separator unless the list gets sorted by match\n        if (!this.sortByLabel) {\n          const previous = element.index && this.inputElements[element.index - 1];\n          currentSeparator = previous && previous.type === 'separator' ? previous : currentSeparator;\n          if (currentSeparator && !element.hidden) {\n            element.separator = currentSeparator;\n            currentSeparator = undefined;\n          }\n        }\n      });\n    }\n    const shownElements = this.elements.filter(element => !element.hidden);\n    // Sort by value\n    if (this.sortByLabel && query) {\n      const normalizedSearchValue = query.toLowerCase();\n      shownElements.sort((a, b) => {\n        return compareEntries(a, b, normalizedSearchValue);\n      });\n    }\n    this.elementsToIndexes = shownElements.reduce((map, element, index) => {\n      var _a;\n      map.set((_a = element.item) !== null && _a !== void 0 ? _a : element.separator, index);\n      return map;\n    }, new Map());\n    this.list.splice(0, this.list.length, shownElements);\n    this.list.setFocus([]);\n    this.list.layout();\n    this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked());\n    this._onChangedVisibleCount.fire(shownElements.length);\n    return true;\n  }\n  toggleCheckbox() {\n    try {\n      this._fireCheckedEvents = false;\n      const elements = this.list.getFocusedElements();\n      const allChecked = this.allVisibleChecked(elements);\n      for (const element of elements) {\n        element.checked = !allChecked;\n      }\n    } finally {\n      this._fireCheckedEvents = true;\n      this.fireCheckedEvents();\n    }\n  }\n  display(display) {\n    this.container.style.display = display ? '' : 'none';\n  }\n  isDisplayed() {\n    return this.container.style.display !== 'none';\n  }\n  dispose() {\n    this.elementDisposables = dispose(this.elementDisposables);\n    this.disposables = dispose(this.disposables);\n  }\n  fireCheckedEvents() {\n    if (this._fireCheckedEvents) {\n      this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked());\n      this._onChangedCheckedCount.fire(this.getCheckedCount());\n      this._onChangedCheckedElements.fire(this.getCheckedElements());\n    }\n  }\n  fireButtonTriggered(event) {\n    this._onButtonTriggered.fire(event);\n  }\n  fireSeparatorButtonTriggered(event) {\n    this._onSeparatorButtonTriggered.fire(event);\n  }\n  style(styles) {\n    this.list.style(styles);\n  }\n  toggleHover() {\n    const element = this.list.getFocusedElements()[0];\n    if (!(element === null || element === void 0 ? void 0 : element.saneTooltip)) {\n      return;\n    }\n    // if there's a hover already, hide it (toggle off)\n    if (this._lastHover && !this._lastHover.isDisposed) {\n      this._lastHover.dispose();\n      return;\n    }\n    // If there is no hover, show it (toggle on)\n    const focused = this.list.getFocusedElements()[0];\n    if (!focused) {\n      return;\n    }\n    this.showHover(focused);\n    const store = new DisposableStore();\n    store.add(this.list.onDidChangeFocus(e => {\n      if (e.indexes.length) {\n        this.showHover(e.elements[0]);\n      }\n    }));\n    if (this._lastHover) {\n      store.add(this._lastHover);\n    }\n    this._toggleHover = store;\n    this.elementDisposables.push(this._toggleHover);\n  }\n}\n__decorate([memoize], QuickInputList.prototype, \"onDidChangeFocus\", null);\n__decorate([memoize], QuickInputList.prototype, \"onDidChangeSelection\", null);\nfunction matchesContiguousIconAware(query, target) {\n  const {\n    text,\n    iconOffsets\n  } = target;\n  // Return early if there are no icon markers in the word to match against\n  if (!iconOffsets || iconOffsets.length === 0) {\n    return matchesContiguous(query, text);\n  }\n  // Trim the word to match against because it could have leading\n  // whitespace now if the word started with an icon\n  const wordToMatchAgainstWithoutIconsTrimmed = ltrim(text, ' ');\n  const leadingWhitespaceOffset = text.length - wordToMatchAgainstWithoutIconsTrimmed.length;\n  // match on value without icon\n  const matches = matchesContiguous(query, wordToMatchAgainstWithoutIconsTrimmed);\n  // Map matches back to offsets with icon and trimming\n  if (matches) {\n    for (const match of matches) {\n      const iconOffset = iconOffsets[match.start + leadingWhitespaceOffset] /* icon offsets at index */ + leadingWhitespaceOffset /* overall leading whitespace offset */;\n      match.start += iconOffset;\n      match.end += iconOffset;\n    }\n  }\n  return matches;\n}\nfunction matchesContiguous(word, wordToMatchAgainst) {\n  const matchIndex = wordToMatchAgainst.toLowerCase().indexOf(word.toLowerCase());\n  if (matchIndex !== -1) {\n    return [{\n      start: matchIndex,\n      end: matchIndex + word.length\n    }];\n  }\n  return null;\n}\nfunction compareEntries(elementA, elementB, lookFor) {\n  const labelHighlightsA = elementA.labelHighlights || [];\n  const labelHighlightsB = elementB.labelHighlights || [];\n  if (labelHighlightsA.length && !labelHighlightsB.length) {\n    return -1;\n  }\n  if (!labelHighlightsA.length && labelHighlightsB.length) {\n    return 1;\n  }\n  if (labelHighlightsA.length === 0 && labelHighlightsB.length === 0) {\n    return 0;\n  }\n  return compareAnything(elementA.saneSortLabel, elementB.saneSortLabel, lookFor);\n}\nclass QuickInputAccessibilityProvider {\n  getWidgetAriaLabel() {\n    return localize('quickInput', \"Quick Input\");\n  }\n  getAriaLabel(element) {\n    var _a;\n    return ((_a = element.separator) === null || _a === void 0 ? void 0 : _a.label) ? `${element.saneAriaLabel}, ${element.separator.label}` : element.saneAriaLabel;\n  }\n  getWidgetRole() {\n    return 'listbox';\n  }\n  getRole(element) {\n    return element.hasCheckbox ? 'checkbox' : 'option';\n  }\n  isChecked(element) {\n    if (!element.hasCheckbox) {\n      return undefined;\n    }\n    return {\n      value: element.checked,\n      onDidChange: element.onChecked\n    };\n  }\n}","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","dom","StandardKeyboardEvent","ActionBar","IconLabel","KeybindingLabel","range","ThrottledDelayer","compareAnything","memoize","isCancellationError","Emitter","Event","getCodiconAriaLabel","matchesFuzzyIconAware","parseLabelWithIcons","DisposableStore","dispose","platform","ltrim","localize","getIconClass","Lazy","URI","isDark","$","ListElement","constructor","mainItem","previous","index","hasCheckbox","fireButtonTriggered","fireSeparatorButtonTriggered","onCheckedEmitter","_a","_b","_c","_checked","_hidden","_onChecked","onChecked","map","filter","event","listElement","checked","None","type","_separator","item","buttons","saneDescription","description","saneDetail","detail","_labelHighlights","highlights","label","_descriptionHighlights","_detailHighlights","saneTooltip","tooltip","_init","saneLabel","saneSortLabel","text","trim","saneAriaLabel","ariaLabel","s","join","element","_element","hidden","fire","separator","labelHighlights","descriptionHighlights","detailHighlights","ListElementRenderer","themeService","templateId","ID","renderTemplate","container","data","create","toDisposeElement","toDisposeTemplate","entry","append","push","addStandardDisposableListener","EventType","CLICK","checkbox","offsetParent","preventDefault","CHANGE","rows","row1","row2","supportHighlights","supportDescriptionHighlights","supportIcons","icon","prepend","keybindingContainer","keybinding","OS","detailContainer","actionBar","domNode","classList","add","renderElement","_d","undefined","iconPath","getColorTheme","dark","light","iconUrl","revive","className","style","backgroundImage","asCSSUrl","iconClass","options","matches","descriptionTitle","descriptionMatches","labelEscapeNewLines","extraClasses","iconClasses","italic","strikethrough","remove","setLabel","set","display","title","textContent","toggle","button","cssClasses","alwaysVisible","id","class","enabled","run","disposeElement","clear","disposeTemplate","ListElementDelegate","getHeight","getTemplateId","QuickInputListFocus","QuickInputList","parent","inputElements","elements","elementsToIndexes","Map","matchOnDescription","matchOnDetail","matchOnLabel","matchOnLabelMode","sortByLabel","_onChangedAllVisibleChecked","onChangedAllVisibleChecked","_onChangedCheckedCount","onChangedCheckedCount","_onChangedVisibleCount","onChangedVisibleCount","_onChangedCheckedElements","onChangedCheckedElements","_onButtonTriggered","onButtonTriggered","_onSeparatorButtonTriggered","onSeparatorButtonTriggered","_onKeyDown","onKeyDown","_onLeave","onLeave","_listElementChecked","_fireCheckedEvents","elementDisposables","disposables","delegate","accessibilityProvider","QuickInputAccessibilityProvider","list","createList","identityProvider","getId","_e","_f","_g","_h","setRowLineHeight","multipleSelectionSupport","horizontalScrolling","getHTMLElement","keyCode","toggleCheckbox","isMacintosh","metaKey","ctrlKey","setFocus","focus1","getFocus","focus2","onMouseDown","browserEvent","addDisposableListener","x","y","onMouseMiddleClick","onContextMenu","setSelection","hoverDelegate","delayer","delay","onMouseOver","HTMLAnchorElement","cancel","relatedTarget","isAncestor","trigger","showHover","onMouseOut","_","fireCheckedEvents","onDidChangeFocus","onDidChangeSelection","items","scrollTop","getAllVisibleChecked","allVisibleChecked","whenNoneVisible","n","getCheckedCount","count","getVisibleCount","setAllVisibleChecked","forEach","setElements","contains","reduce","resultIndex","splice","getFocusedElements","setFocusedElements","has","get","focused","reveal","getActiveDescendant","getAttribute","setSelectedElements","getCheckedElements","setCheckedElements","Set","pointerEvents","focus","what","Second","First","focusFirst","focusNth","Last","scrollHeight","focusLast","Next","focusNext","firstVisibleIndex","Previous","focusPrevious","NextPage","focusNextPage","PreviousPage","focusPreviousPage","clearFocus","domFocus","_lastHover","isDisposed","onDidHideHover","call","content","linkHandler","url","linkOpenerDelegate","showPointer","hoverPosition","layout","maxHeight","Math","floor","query","queryWithWhitespace","currentSeparator","matchesContiguousIconAware","alwaysShow","shownElements","normalizedSearchValue","toLowerCase","sort","a","b","compareEntries","allChecked","isDisplayed","styles","toggleHover","store","indexes","_toggleHover","prototype","iconOffsets","matchesContiguous","wordToMatchAgainstWithoutIconsTrimmed","leadingWhitespaceOffset","match","iconOffset","start","end","word","wordToMatchAgainst","matchIndex","indexOf","elementA","elementB","lookFor","labelHighlightsA","labelHighlightsB","getWidgetAriaLabel","getAriaLabel","getWidgetRole","getRole","isChecked","onDidChange"],"sources":["/home/chlohest/work/website/my_web/node_modules/monaco-editor/esm/vs/platform/quickinput/browser/quickInputList.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../base/browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\nimport { ActionBar } from '../../../base/browser/ui/actionbar/actionbar.js';\nimport { IconLabel } from '../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { KeybindingLabel } from '../../../base/browser/ui/keybindingLabel/keybindingLabel.js';\nimport { range } from '../../../base/common/arrays.js';\nimport { ThrottledDelayer } from '../../../base/common/async.js';\nimport { compareAnything } from '../../../base/common/comparers.js';\nimport { memoize } from '../../../base/common/decorators.js';\nimport { isCancellationError } from '../../../base/common/errors.js';\nimport { Emitter, Event } from '../../../base/common/event.js';\nimport { getCodiconAriaLabel, matchesFuzzyIconAware, parseLabelWithIcons } from '../../../base/common/iconLabels.js';\nimport { DisposableStore, dispose } from '../../../base/common/lifecycle.js';\nimport * as platform from '../../../base/common/platform.js';\nimport { ltrim } from '../../../base/common/strings.js';\nimport './media/quickInput.css';\nimport { localize } from '../../../nls.js';\nimport { getIconClass } from './quickInputUtils.js';\nimport { Lazy } from '../../../base/common/lazy.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { isDark } from '../../theme/common/theme.js';\nconst $ = dom.$;\nclass ListElement {\n    constructor(mainItem, previous, index, hasCheckbox, fireButtonTriggered, fireSeparatorButtonTriggered, onCheckedEmitter) {\n        var _a, _b, _c;\n        // state will get updated later\n        this._checked = false;\n        this._hidden = false;\n        this.hasCheckbox = hasCheckbox;\n        this.index = index;\n        this.fireButtonTriggered = fireButtonTriggered;\n        this.fireSeparatorButtonTriggered = fireSeparatorButtonTriggered;\n        this._onChecked = onCheckedEmitter;\n        this.onChecked = hasCheckbox\n            ? Event.map(Event.filter(this._onChecked.event, e => e.listElement === this), e => e.checked)\n            : Event.None;\n        if (mainItem.type === 'separator') {\n            this._separator = mainItem;\n        }\n        else {\n            this.item = mainItem;\n            if (previous && previous.type === 'separator' && !previous.buttons) {\n                this._separator = previous;\n            }\n            this.saneDescription = this.item.description;\n            this.saneDetail = this.item.detail;\n            this._labelHighlights = (_a = this.item.highlights) === null || _a === void 0 ? void 0 : _a.label;\n            this._descriptionHighlights = (_b = this.item.highlights) === null || _b === void 0 ? void 0 : _b.description;\n            this._detailHighlights = (_c = this.item.highlights) === null || _c === void 0 ? void 0 : _c.detail;\n            this.saneTooltip = this.item.tooltip;\n        }\n        this._init = new Lazy(() => {\n            var _a;\n            const saneLabel = (_a = mainItem.label) !== null && _a !== void 0 ? _a : '';\n            const saneSortLabel = parseLabelWithIcons(saneLabel).text.trim();\n            const saneAriaLabel = mainItem.ariaLabel || [saneLabel, this.saneDescription, this.saneDetail]\n                .map(s => getCodiconAriaLabel(s))\n                .filter(s => !!s)\n                .join(', ');\n            return {\n                saneLabel,\n                saneSortLabel,\n                saneAriaLabel\n            };\n        });\n    }\n    // #region Lazy Getters\n    get saneLabel() {\n        return this._init.value.saneLabel;\n    }\n    get saneSortLabel() {\n        return this._init.value.saneSortLabel;\n    }\n    get saneAriaLabel() {\n        return this._init.value.saneAriaLabel;\n    }\n    // #endregion\n    // #region Getters and Setters\n    get element() {\n        return this._element;\n    }\n    set element(value) {\n        this._element = value;\n    }\n    get hidden() {\n        return this._hidden;\n    }\n    set hidden(value) {\n        this._hidden = value;\n    }\n    get checked() {\n        return this._checked;\n    }\n    set checked(value) {\n        if (value !== this._checked) {\n            this._checked = value;\n            this._onChecked.fire({ listElement: this, checked: value });\n        }\n    }\n    get separator() {\n        return this._separator;\n    }\n    set separator(value) {\n        this._separator = value;\n    }\n    get labelHighlights() {\n        return this._labelHighlights;\n    }\n    set labelHighlights(value) {\n        this._labelHighlights = value;\n    }\n    get descriptionHighlights() {\n        return this._descriptionHighlights;\n    }\n    set descriptionHighlights(value) {\n        this._descriptionHighlights = value;\n    }\n    get detailHighlights() {\n        return this._detailHighlights;\n    }\n    set detailHighlights(value) {\n        this._detailHighlights = value;\n    }\n}\nclass ListElementRenderer {\n    constructor(themeService) {\n        this.themeService = themeService;\n    }\n    get templateId() {\n        return ListElementRenderer.ID;\n    }\n    renderTemplate(container) {\n        const data = Object.create(null);\n        data.toDisposeElement = [];\n        data.toDisposeTemplate = [];\n        data.entry = dom.append(container, $('.quick-input-list-entry'));\n        // Checkbox\n        const label = dom.append(data.entry, $('label.quick-input-list-label'));\n        data.toDisposeTemplate.push(dom.addStandardDisposableListener(label, dom.EventType.CLICK, e => {\n            if (!data.checkbox.offsetParent) { // If checkbox not visible:\n                e.preventDefault(); // Prevent toggle of checkbox when it is immediately shown afterwards. #91740\n            }\n        }));\n        data.checkbox = dom.append(label, $('input.quick-input-list-checkbox'));\n        data.checkbox.type = 'checkbox';\n        data.toDisposeTemplate.push(dom.addStandardDisposableListener(data.checkbox, dom.EventType.CHANGE, e => {\n            data.element.checked = data.checkbox.checked;\n        }));\n        // Rows\n        const rows = dom.append(label, $('.quick-input-list-rows'));\n        const row1 = dom.append(rows, $('.quick-input-list-row'));\n        const row2 = dom.append(rows, $('.quick-input-list-row'));\n        // Label\n        data.label = new IconLabel(row1, { supportHighlights: true, supportDescriptionHighlights: true, supportIcons: true });\n        data.toDisposeTemplate.push(data.label);\n        data.icon = dom.prepend(data.label.element, $('.quick-input-list-icon'));\n        // Keybinding\n        const keybindingContainer = dom.append(row1, $('.quick-input-list-entry-keybinding'));\n        data.keybinding = new KeybindingLabel(keybindingContainer, platform.OS);\n        // Detail\n        const detailContainer = dom.append(row2, $('.quick-input-list-label-meta'));\n        data.detail = new IconLabel(detailContainer, { supportHighlights: true, supportIcons: true });\n        data.toDisposeTemplate.push(data.detail);\n        // Separator\n        data.separator = dom.append(data.entry, $('.quick-input-list-separator'));\n        // Actions\n        data.actionBar = new ActionBar(data.entry);\n        data.actionBar.domNode.classList.add('quick-input-list-entry-action-bar');\n        data.toDisposeTemplate.push(data.actionBar);\n        return data;\n    }\n    renderElement(element, index, data) {\n        var _a, _b, _c, _d;\n        data.element = element;\n        element.element = (_a = data.entry) !== null && _a !== void 0 ? _a : undefined;\n        const mainItem = element.item ? element.item : element.separator;\n        data.checkbox.checked = element.checked;\n        data.toDisposeElement.push(element.onChecked(checked => data.checkbox.checked = checked));\n        const { labelHighlights, descriptionHighlights, detailHighlights } = element;\n        if ((_b = element.item) === null || _b === void 0 ? void 0 : _b.iconPath) {\n            const icon = isDark(this.themeService.getColorTheme().type) ? element.item.iconPath.dark : ((_c = element.item.iconPath.light) !== null && _c !== void 0 ? _c : element.item.iconPath.dark);\n            const iconUrl = URI.revive(icon);\n            data.icon.className = 'quick-input-list-icon';\n            data.icon.style.backgroundImage = dom.asCSSUrl(iconUrl);\n        }\n        else {\n            data.icon.style.backgroundImage = '';\n            data.icon.className = ((_d = element.item) === null || _d === void 0 ? void 0 : _d.iconClass) ? `quick-input-list-icon ${element.item.iconClass}` : '';\n        }\n        // Label\n        const options = {\n            matches: labelHighlights || [],\n            descriptionTitle: element.saneDescription,\n            descriptionMatches: descriptionHighlights || [],\n            labelEscapeNewLines: true\n        };\n        if (mainItem.type !== 'separator') {\n            options.extraClasses = mainItem.iconClasses;\n            options.italic = mainItem.italic;\n            options.strikethrough = mainItem.strikethrough;\n            data.entry.classList.remove('quick-input-list-separator-as-item');\n        }\n        else {\n            data.entry.classList.add('quick-input-list-separator-as-item');\n        }\n        data.label.setLabel(element.saneLabel, element.saneDescription, options);\n        // Keybinding\n        data.keybinding.set(mainItem.type === 'separator' ? undefined : mainItem.keybinding);\n        // Detail\n        if (element.saneDetail) {\n            data.detail.element.style.display = '';\n            data.detail.setLabel(element.saneDetail, undefined, {\n                matches: detailHighlights,\n                title: element.saneDetail,\n                labelEscapeNewLines: true\n            });\n        }\n        else {\n            data.detail.element.style.display = 'none';\n        }\n        // Separator\n        if (element.item && element.separator && element.separator.label) {\n            data.separator.textContent = element.separator.label;\n            data.separator.style.display = '';\n        }\n        else {\n            data.separator.style.display = 'none';\n        }\n        data.entry.classList.toggle('quick-input-list-separator-border', !!element.separator);\n        // Actions\n        const buttons = mainItem.buttons;\n        if (buttons && buttons.length) {\n            data.actionBar.push(buttons.map((button, index) => {\n                let cssClasses = button.iconClass || (button.iconPath ? getIconClass(button.iconPath) : undefined);\n                if (button.alwaysVisible) {\n                    cssClasses = cssClasses ? `${cssClasses} always-visible` : 'always-visible';\n                }\n                return {\n                    id: `id-${index}`,\n                    class: cssClasses,\n                    enabled: true,\n                    label: '',\n                    tooltip: button.tooltip || '',\n                    run: () => {\n                        mainItem.type !== 'separator'\n                            ? element.fireButtonTriggered({\n                                button,\n                                item: mainItem\n                            })\n                            : element.fireSeparatorButtonTriggered({\n                                button,\n                                separator: mainItem\n                            });\n                    }\n                };\n            }), { icon: true, label: false });\n            data.entry.classList.add('has-actions');\n        }\n        else {\n            data.entry.classList.remove('has-actions');\n        }\n    }\n    disposeElement(element, index, data) {\n        data.toDisposeElement = dispose(data.toDisposeElement);\n        data.actionBar.clear();\n    }\n    disposeTemplate(data) {\n        data.toDisposeElement = dispose(data.toDisposeElement);\n        data.toDisposeTemplate = dispose(data.toDisposeTemplate);\n    }\n}\nListElementRenderer.ID = 'listelement';\nclass ListElementDelegate {\n    getHeight(element) {\n        if (!element.item) {\n            // must be a separator\n            return 24;\n        }\n        return element.saneDetail ? 44 : 22;\n    }\n    getTemplateId(element) {\n        return ListElementRenderer.ID;\n    }\n}\nexport var QuickInputListFocus;\n(function (QuickInputListFocus) {\n    QuickInputListFocus[QuickInputListFocus[\"First\"] = 1] = \"First\";\n    QuickInputListFocus[QuickInputListFocus[\"Second\"] = 2] = \"Second\";\n    QuickInputListFocus[QuickInputListFocus[\"Last\"] = 3] = \"Last\";\n    QuickInputListFocus[QuickInputListFocus[\"Next\"] = 4] = \"Next\";\n    QuickInputListFocus[QuickInputListFocus[\"Previous\"] = 5] = \"Previous\";\n    QuickInputListFocus[QuickInputListFocus[\"NextPage\"] = 6] = \"NextPage\";\n    QuickInputListFocus[QuickInputListFocus[\"PreviousPage\"] = 7] = \"PreviousPage\";\n})(QuickInputListFocus || (QuickInputListFocus = {}));\nexport class QuickInputList {\n    constructor(parent, id, options, themeService) {\n        this.parent = parent;\n        this.options = options;\n        this.inputElements = [];\n        this.elements = [];\n        this.elementsToIndexes = new Map();\n        this.matchOnDescription = false;\n        this.matchOnDetail = false;\n        this.matchOnLabel = true;\n        this.matchOnLabelMode = 'fuzzy';\n        this.sortByLabel = true;\n        this._onChangedAllVisibleChecked = new Emitter();\n        this.onChangedAllVisibleChecked = this._onChangedAllVisibleChecked.event;\n        this._onChangedCheckedCount = new Emitter();\n        this.onChangedCheckedCount = this._onChangedCheckedCount.event;\n        this._onChangedVisibleCount = new Emitter();\n        this.onChangedVisibleCount = this._onChangedVisibleCount.event;\n        this._onChangedCheckedElements = new Emitter();\n        this.onChangedCheckedElements = this._onChangedCheckedElements.event;\n        this._onButtonTriggered = new Emitter();\n        this.onButtonTriggered = this._onButtonTriggered.event;\n        this._onSeparatorButtonTriggered = new Emitter();\n        this.onSeparatorButtonTriggered = this._onSeparatorButtonTriggered.event;\n        this._onKeyDown = new Emitter();\n        this.onKeyDown = this._onKeyDown.event;\n        this._onLeave = new Emitter();\n        this.onLeave = this._onLeave.event;\n        this._listElementChecked = new Emitter();\n        this._fireCheckedEvents = true;\n        this.elementDisposables = [];\n        this.disposables = [];\n        this.id = id;\n        this.container = dom.append(this.parent, $('.quick-input-list'));\n        const delegate = new ListElementDelegate();\n        const accessibilityProvider = new QuickInputAccessibilityProvider();\n        this.list = options.createList('QuickInput', this.container, delegate, [new ListElementRenderer(themeService)], {\n            identityProvider: {\n                getId: element => {\n                    var _a, _b, _c, _d, _e, _f, _g, _h;\n                    // always prefer item over separator because if item is defined, it must be the main item type\n                    // always prefer a defined id if one was specified and use label as a fallback\n                    return (_h = (_f = (_d = (_b = (_a = element.item) === null || _a === void 0 ? void 0 : _a.id) !== null && _b !== void 0 ? _b : (_c = element.item) === null || _c === void 0 ? void 0 : _c.label) !== null && _d !== void 0 ? _d : (_e = element.separator) === null || _e === void 0 ? void 0 : _e.id) !== null && _f !== void 0 ? _f : (_g = element.separator) === null || _g === void 0 ? void 0 : _g.label) !== null && _h !== void 0 ? _h : '';\n                }\n            },\n            setRowLineHeight: false,\n            multipleSelectionSupport: false,\n            horizontalScrolling: false,\n            accessibilityProvider\n        });\n        this.list.getHTMLElement().id = id;\n        this.disposables.push(this.list);\n        this.disposables.push(this.list.onKeyDown(e => {\n            const event = new StandardKeyboardEvent(e);\n            switch (event.keyCode) {\n                case 10 /* KeyCode.Space */:\n                    this.toggleCheckbox();\n                    break;\n                case 31 /* KeyCode.KeyA */:\n                    if (platform.isMacintosh ? e.metaKey : e.ctrlKey) {\n                        this.list.setFocus(range(this.list.length));\n                    }\n                    break;\n                case 16 /* KeyCode.UpArrow */: {\n                    const focus1 = this.list.getFocus();\n                    if (focus1.length === 1 && focus1[0] === 0) {\n                        this._onLeave.fire();\n                    }\n                    break;\n                }\n                case 18 /* KeyCode.DownArrow */: {\n                    const focus2 = this.list.getFocus();\n                    if (focus2.length === 1 && focus2[0] === this.list.length - 1) {\n                        this._onLeave.fire();\n                    }\n                    break;\n                }\n            }\n            this._onKeyDown.fire(event);\n        }));\n        this.disposables.push(this.list.onMouseDown(e => {\n            if (e.browserEvent.button !== 2) {\n                // Works around / fixes #64350.\n                e.browserEvent.preventDefault();\n            }\n        }));\n        this.disposables.push(dom.addDisposableListener(this.container, dom.EventType.CLICK, e => {\n            if (e.x || e.y) { // Avoid 'click' triggered by 'space' on checkbox.\n                this._onLeave.fire();\n            }\n        }));\n        this.disposables.push(this.list.onMouseMiddleClick(e => {\n            this._onLeave.fire();\n        }));\n        this.disposables.push(this.list.onContextMenu(e => {\n            if (typeof e.index === 'number') {\n                e.browserEvent.preventDefault();\n                // we want to treat a context menu event as\n                // a gesture to open the item at the index\n                // since we do not have any context menu\n                // this enables for example macOS to Ctrl-\n                // click on an item to open it.\n                this.list.setSelection([e.index]);\n            }\n        }));\n        if (options.hoverDelegate) {\n            const delayer = new ThrottledDelayer(options.hoverDelegate.delay);\n            // onMouseOver triggers every time a new element has been moused over\n            // even if it's on the same list item.\n            this.disposables.push(this.list.onMouseOver((e) => __awaiter(this, void 0, void 0, function* () {\n                var _a;\n                // If we hover over an anchor element, we don't want to show the hover because\n                // the anchor may have a tooltip that we want to show instead.\n                if (e.browserEvent.target instanceof HTMLAnchorElement) {\n                    delayer.cancel();\n                    return;\n                }\n                if (\n                // anchors are an exception as called out above so we skip them here\n                !(e.browserEvent.relatedTarget instanceof HTMLAnchorElement) &&\n                    // check if the mouse is still over the same element\n                    dom.isAncestor(e.browserEvent.relatedTarget, (_a = e.element) === null || _a === void 0 ? void 0 : _a.element)) {\n                    return;\n                }\n                try {\n                    yield delayer.trigger(() => __awaiter(this, void 0, void 0, function* () {\n                        if (e.element) {\n                            this.showHover(e.element);\n                        }\n                    }));\n                }\n                catch (e) {\n                    // Ignore cancellation errors due to mouse out\n                    if (!isCancellationError(e)) {\n                        throw e;\n                    }\n                }\n            })));\n            this.disposables.push(this.list.onMouseOut(e => {\n                var _a;\n                // onMouseOut triggers every time a new element has been moused over\n                // even if it's on the same list item. We only want one event, so we\n                // check if the mouse is still over the same element.\n                if (dom.isAncestor(e.browserEvent.relatedTarget, (_a = e.element) === null || _a === void 0 ? void 0 : _a.element)) {\n                    return;\n                }\n                delayer.cancel();\n            }));\n            this.disposables.push(delayer);\n        }\n        this.disposables.push(this._listElementChecked.event(_ => this.fireCheckedEvents()));\n        this.disposables.push(this._onChangedAllVisibleChecked, this._onChangedCheckedCount, this._onChangedVisibleCount, this._onChangedCheckedElements, this._onButtonTriggered, this._onSeparatorButtonTriggered, this._onLeave, this._onKeyDown);\n    }\n    get onDidChangeFocus() {\n        return Event.map(this.list.onDidChangeFocus, e => e.elements.map(e => e.item));\n    }\n    get onDidChangeSelection() {\n        return Event.map(this.list.onDidChangeSelection, e => ({ items: e.elements.map(e => e.item), event: e.browserEvent }));\n    }\n    get scrollTop() {\n        return this.list.scrollTop;\n    }\n    set scrollTop(scrollTop) {\n        this.list.scrollTop = scrollTop;\n    }\n    get ariaLabel() {\n        return this.list.getHTMLElement().ariaLabel;\n    }\n    set ariaLabel(label) {\n        this.list.getHTMLElement().ariaLabel = label;\n    }\n    getAllVisibleChecked() {\n        return this.allVisibleChecked(this.elements, false);\n    }\n    allVisibleChecked(elements, whenNoneVisible = true) {\n        for (let i = 0, n = elements.length; i < n; i++) {\n            const element = elements[i];\n            if (!element.hidden) {\n                if (!element.checked) {\n                    return false;\n                }\n                else {\n                    whenNoneVisible = true;\n                }\n            }\n        }\n        return whenNoneVisible;\n    }\n    getCheckedCount() {\n        let count = 0;\n        const elements = this.elements;\n        for (let i = 0, n = elements.length; i < n; i++) {\n            if (elements[i].checked) {\n                count++;\n            }\n        }\n        return count;\n    }\n    getVisibleCount() {\n        let count = 0;\n        const elements = this.elements;\n        for (let i = 0, n = elements.length; i < n; i++) {\n            if (!elements[i].hidden) {\n                count++;\n            }\n        }\n        return count;\n    }\n    setAllVisibleChecked(checked) {\n        try {\n            this._fireCheckedEvents = false;\n            this.elements.forEach(element => {\n                if (!element.hidden) {\n                    element.checked = checked;\n                }\n            });\n        }\n        finally {\n            this._fireCheckedEvents = true;\n            this.fireCheckedEvents();\n        }\n    }\n    setElements(inputElements) {\n        this.elementDisposables = dispose(this.elementDisposables);\n        const fireButtonTriggered = (event) => this.fireButtonTriggered(event);\n        const fireSeparatorButtonTriggered = (event) => this.fireSeparatorButtonTriggered(event);\n        this.inputElements = inputElements;\n        const elementsToIndexes = new Map();\n        const hasCheckbox = this.parent.classList.contains('show-checkboxes');\n        this.elements = inputElements.reduce((result, item, index) => {\n            var _a;\n            const previous = index > 0 ? inputElements[index - 1] : undefined;\n            if (item.type === 'separator') {\n                if (!item.buttons) {\n                    // This separator will be rendered as a part of the list item\n                    return result;\n                }\n            }\n            const element = new ListElement(item, previous, index, hasCheckbox, fireButtonTriggered, fireSeparatorButtonTriggered, this._listElementChecked);\n            const resultIndex = result.length;\n            result.push(element);\n            elementsToIndexes.set((_a = element.item) !== null && _a !== void 0 ? _a : element.separator, resultIndex);\n            return result;\n        }, []);\n        this.elementsToIndexes = elementsToIndexes;\n        this.list.splice(0, this.list.length); // Clear focus and selection first, sending the events when the list is empty.\n        this.list.splice(0, this.list.length, this.elements);\n        this._onChangedVisibleCount.fire(this.elements.length);\n    }\n    getFocusedElements() {\n        return this.list.getFocusedElements()\n            .map(e => e.item);\n    }\n    setFocusedElements(items) {\n        this.list.setFocus(items\n            .filter(item => this.elementsToIndexes.has(item))\n            .map(item => this.elementsToIndexes.get(item)));\n        if (items.length > 0) {\n            const focused = this.list.getFocus()[0];\n            if (typeof focused === 'number') {\n                this.list.reveal(focused);\n            }\n        }\n    }\n    getActiveDescendant() {\n        return this.list.getHTMLElement().getAttribute('aria-activedescendant');\n    }\n    setSelectedElements(items) {\n        this.list.setSelection(items\n            .filter(item => this.elementsToIndexes.has(item))\n            .map(item => this.elementsToIndexes.get(item)));\n    }\n    getCheckedElements() {\n        return this.elements.filter(e => e.checked)\n            .map(e => e.item)\n            .filter(e => !!e);\n    }\n    setCheckedElements(items) {\n        try {\n            this._fireCheckedEvents = false;\n            const checked = new Set();\n            for (const item of items) {\n                checked.add(item);\n            }\n            for (const element of this.elements) {\n                element.checked = checked.has(element.item);\n            }\n        }\n        finally {\n            this._fireCheckedEvents = true;\n            this.fireCheckedEvents();\n        }\n    }\n    set enabled(value) {\n        this.list.getHTMLElement().style.pointerEvents = value ? '' : 'none';\n    }\n    focus(what) {\n        if (!this.list.length) {\n            return;\n        }\n        if (what === QuickInputListFocus.Second && this.list.length < 2) {\n            what = QuickInputListFocus.First;\n        }\n        switch (what) {\n            case QuickInputListFocus.First:\n                this.list.scrollTop = 0;\n                this.list.focusFirst(undefined, (e) => !!e.item);\n                break;\n            case QuickInputListFocus.Second:\n                this.list.scrollTop = 0;\n                this.list.focusNth(1, undefined, (e) => !!e.item);\n                break;\n            case QuickInputListFocus.Last:\n                this.list.scrollTop = this.list.scrollHeight;\n                this.list.focusLast(undefined, (e) => !!e.item);\n                break;\n            case QuickInputListFocus.Next: {\n                this.list.focusNext(undefined, true, undefined, (e) => !!e.item);\n                const index = this.list.getFocus()[0];\n                if (index !== 0 && !this.elements[index - 1].item && this.list.firstVisibleIndex > index - 1) {\n                    this.list.reveal(index - 1);\n                }\n                break;\n            }\n            case QuickInputListFocus.Previous: {\n                this.list.focusPrevious(undefined, true, undefined, (e) => !!e.item);\n                const index = this.list.getFocus()[0];\n                if (index !== 0 && !this.elements[index - 1].item && this.list.firstVisibleIndex > index - 1) {\n                    this.list.reveal(index - 1);\n                }\n                break;\n            }\n            case QuickInputListFocus.NextPage:\n                this.list.focusNextPage(undefined, (e) => !!e.item);\n                break;\n            case QuickInputListFocus.PreviousPage:\n                this.list.focusPreviousPage(undefined, (e) => !!e.item);\n                break;\n        }\n        const focused = this.list.getFocus()[0];\n        if (typeof focused === 'number') {\n            this.list.reveal(focused);\n        }\n    }\n    clearFocus() {\n        this.list.setFocus([]);\n    }\n    domFocus() {\n        this.list.domFocus();\n    }\n    /**\n     * Disposes of the hover and shows a new one for the given index if it has a tooltip.\n     * @param element The element to show the hover for\n     */\n    showHover(element) {\n        var _a, _b, _c;\n        if (this.options.hoverDelegate === undefined) {\n            return;\n        }\n        if (this._lastHover && !this._lastHover.isDisposed) {\n            (_b = (_a = this.options.hoverDelegate).onDidHideHover) === null || _b === void 0 ? void 0 : _b.call(_a);\n            (_c = this._lastHover) === null || _c === void 0 ? void 0 : _c.dispose();\n        }\n        if (!element.element || !element.saneTooltip) {\n            return;\n        }\n        this._lastHover = this.options.hoverDelegate.showHover({\n            content: element.saneTooltip,\n            target: element.element,\n            linkHandler: (url) => {\n                this.options.linkOpenerDelegate(url);\n            },\n            showPointer: true,\n            container: this.container,\n            hoverPosition: 1 /* HoverPosition.RIGHT */\n        }, false);\n    }\n    layout(maxHeight) {\n        this.list.getHTMLElement().style.maxHeight = maxHeight ? `${\n        // Make sure height aligns with list item heights\n        Math.floor(maxHeight / 44) * 44\n            // Add some extra height so that it's clear there's more to scroll\n            + 6}px` : '';\n        this.list.layout();\n    }\n    filter(query) {\n        if (!(this.sortByLabel || this.matchOnLabel || this.matchOnDescription || this.matchOnDetail)) {\n            this.list.layout();\n            return false;\n        }\n        const queryWithWhitespace = query;\n        query = query.trim();\n        // Reset filtering\n        if (!query || !(this.matchOnLabel || this.matchOnDescription || this.matchOnDetail)) {\n            this.elements.forEach(element => {\n                element.labelHighlights = undefined;\n                element.descriptionHighlights = undefined;\n                element.detailHighlights = undefined;\n                element.hidden = false;\n                const previous = element.index && this.inputElements[element.index - 1];\n                if (element.item) {\n                    element.separator = previous && previous.type === 'separator' && !previous.buttons ? previous : undefined;\n                }\n            });\n        }\n        // Filter by value (since we support icons in labels, use $(..) aware fuzzy matching)\n        else {\n            let currentSeparator;\n            this.elements.forEach(element => {\n                var _a, _b, _c, _d;\n                let labelHighlights;\n                if (this.matchOnLabelMode === 'fuzzy') {\n                    labelHighlights = this.matchOnLabel ? (_a = matchesFuzzyIconAware(query, parseLabelWithIcons(element.saneLabel))) !== null && _a !== void 0 ? _a : undefined : undefined;\n                }\n                else {\n                    labelHighlights = this.matchOnLabel ? (_b = matchesContiguousIconAware(queryWithWhitespace, parseLabelWithIcons(element.saneLabel))) !== null && _b !== void 0 ? _b : undefined : undefined;\n                }\n                const descriptionHighlights = this.matchOnDescription ? (_c = matchesFuzzyIconAware(query, parseLabelWithIcons(element.saneDescription || ''))) !== null && _c !== void 0 ? _c : undefined : undefined;\n                const detailHighlights = this.matchOnDetail ? (_d = matchesFuzzyIconAware(query, parseLabelWithIcons(element.saneDetail || ''))) !== null && _d !== void 0 ? _d : undefined : undefined;\n                if (labelHighlights || descriptionHighlights || detailHighlights) {\n                    element.labelHighlights = labelHighlights;\n                    element.descriptionHighlights = descriptionHighlights;\n                    element.detailHighlights = detailHighlights;\n                    element.hidden = false;\n                }\n                else {\n                    element.labelHighlights = undefined;\n                    element.descriptionHighlights = undefined;\n                    element.detailHighlights = undefined;\n                    element.hidden = element.item ? !element.item.alwaysShow : true;\n                }\n                // Ensure separators are filtered out first before deciding if we need to bring them back\n                if (element.item) {\n                    element.separator = undefined;\n                }\n                else if (element.separator) {\n                    element.hidden = true;\n                }\n                // we can show the separator unless the list gets sorted by match\n                if (!this.sortByLabel) {\n                    const previous = element.index && this.inputElements[element.index - 1];\n                    currentSeparator = previous && previous.type === 'separator' ? previous : currentSeparator;\n                    if (currentSeparator && !element.hidden) {\n                        element.separator = currentSeparator;\n                        currentSeparator = undefined;\n                    }\n                }\n            });\n        }\n        const shownElements = this.elements.filter(element => !element.hidden);\n        // Sort by value\n        if (this.sortByLabel && query) {\n            const normalizedSearchValue = query.toLowerCase();\n            shownElements.sort((a, b) => {\n                return compareEntries(a, b, normalizedSearchValue);\n            });\n        }\n        this.elementsToIndexes = shownElements.reduce((map, element, index) => {\n            var _a;\n            map.set((_a = element.item) !== null && _a !== void 0 ? _a : element.separator, index);\n            return map;\n        }, new Map());\n        this.list.splice(0, this.list.length, shownElements);\n        this.list.setFocus([]);\n        this.list.layout();\n        this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked());\n        this._onChangedVisibleCount.fire(shownElements.length);\n        return true;\n    }\n    toggleCheckbox() {\n        try {\n            this._fireCheckedEvents = false;\n            const elements = this.list.getFocusedElements();\n            const allChecked = this.allVisibleChecked(elements);\n            for (const element of elements) {\n                element.checked = !allChecked;\n            }\n        }\n        finally {\n            this._fireCheckedEvents = true;\n            this.fireCheckedEvents();\n        }\n    }\n    display(display) {\n        this.container.style.display = display ? '' : 'none';\n    }\n    isDisplayed() {\n        return this.container.style.display !== 'none';\n    }\n    dispose() {\n        this.elementDisposables = dispose(this.elementDisposables);\n        this.disposables = dispose(this.disposables);\n    }\n    fireCheckedEvents() {\n        if (this._fireCheckedEvents) {\n            this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked());\n            this._onChangedCheckedCount.fire(this.getCheckedCount());\n            this._onChangedCheckedElements.fire(this.getCheckedElements());\n        }\n    }\n    fireButtonTriggered(event) {\n        this._onButtonTriggered.fire(event);\n    }\n    fireSeparatorButtonTriggered(event) {\n        this._onSeparatorButtonTriggered.fire(event);\n    }\n    style(styles) {\n        this.list.style(styles);\n    }\n    toggleHover() {\n        const element = this.list.getFocusedElements()[0];\n        if (!(element === null || element === void 0 ? void 0 : element.saneTooltip)) {\n            return;\n        }\n        // if there's a hover already, hide it (toggle off)\n        if (this._lastHover && !this._lastHover.isDisposed) {\n            this._lastHover.dispose();\n            return;\n        }\n        // If there is no hover, show it (toggle on)\n        const focused = this.list.getFocusedElements()[0];\n        if (!focused) {\n            return;\n        }\n        this.showHover(focused);\n        const store = new DisposableStore();\n        store.add(this.list.onDidChangeFocus(e => {\n            if (e.indexes.length) {\n                this.showHover(e.elements[0]);\n            }\n        }));\n        if (this._lastHover) {\n            store.add(this._lastHover);\n        }\n        this._toggleHover = store;\n        this.elementDisposables.push(this._toggleHover);\n    }\n}\n__decorate([\n    memoize\n], QuickInputList.prototype, \"onDidChangeFocus\", null);\n__decorate([\n    memoize\n], QuickInputList.prototype, \"onDidChangeSelection\", null);\nfunction matchesContiguousIconAware(query, target) {\n    const { text, iconOffsets } = target;\n    // Return early if there are no icon markers in the word to match against\n    if (!iconOffsets || iconOffsets.length === 0) {\n        return matchesContiguous(query, text);\n    }\n    // Trim the word to match against because it could have leading\n    // whitespace now if the word started with an icon\n    const wordToMatchAgainstWithoutIconsTrimmed = ltrim(text, ' ');\n    const leadingWhitespaceOffset = text.length - wordToMatchAgainstWithoutIconsTrimmed.length;\n    // match on value without icon\n    const matches = matchesContiguous(query, wordToMatchAgainstWithoutIconsTrimmed);\n    // Map matches back to offsets with icon and trimming\n    if (matches) {\n        for (const match of matches) {\n            const iconOffset = iconOffsets[match.start + leadingWhitespaceOffset] /* icon offsets at index */ + leadingWhitespaceOffset /* overall leading whitespace offset */;\n            match.start += iconOffset;\n            match.end += iconOffset;\n        }\n    }\n    return matches;\n}\nfunction matchesContiguous(word, wordToMatchAgainst) {\n    const matchIndex = wordToMatchAgainst.toLowerCase().indexOf(word.toLowerCase());\n    if (matchIndex !== -1) {\n        return [{ start: matchIndex, end: matchIndex + word.length }];\n    }\n    return null;\n}\nfunction compareEntries(elementA, elementB, lookFor) {\n    const labelHighlightsA = elementA.labelHighlights || [];\n    const labelHighlightsB = elementB.labelHighlights || [];\n    if (labelHighlightsA.length && !labelHighlightsB.length) {\n        return -1;\n    }\n    if (!labelHighlightsA.length && labelHighlightsB.length) {\n        return 1;\n    }\n    if (labelHighlightsA.length === 0 && labelHighlightsB.length === 0) {\n        return 0;\n    }\n    return compareAnything(elementA.saneSortLabel, elementB.saneSortLabel, lookFor);\n}\nclass QuickInputAccessibilityProvider {\n    getWidgetAriaLabel() {\n        return localize('quickInput', \"Quick Input\");\n    }\n    getAriaLabel(element) {\n        var _a;\n        return ((_a = element.separator) === null || _a === void 0 ? void 0 : _a.label)\n            ? `${element.saneAriaLabel}, ${element.separator.label}`\n            : element.saneAriaLabel;\n    }\n    getWidgetRole() {\n        return 'listbox';\n    }\n    getRole(element) {\n        return element.hasCheckbox ? 'checkbox' : 'option';\n    }\n    isChecked(element) {\n        if (!element.hasCheckbox) {\n            return undefined;\n        }\n        return {\n            value: element.checked,\n            onDidChange: element.onChecked\n        };\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}